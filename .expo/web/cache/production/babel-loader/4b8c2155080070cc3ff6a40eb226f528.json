{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import FlatList from\"react-native-web/dist/exports/FlatList\";import Modal from\"react-native-web/dist/exports/Modal\";import RefreshControl from\"react-native-web/dist/exports/RefreshControl\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Image from\"react-native-web/dist/exports/Image\";import{SQLite}from'expo-sqlite';var db=SQLite.openDatabase('db.db');import Contact_compo_e from\"../../Explorer_components/Contact_compo_e\";import Product_compo_e from\"../../Explorer_components/Product_compo_e\";import Create_product from\"../notes_components/Create_product\";import Create_contacts from\"../notes_components/Create_contacts\";import{MaterialIcons,Ionicons,Entypo}from'@expo/vector-icons';import{load_products,load_contacts}from\"../../models/all_models\";var Pro_con_data=function(_Component){_inherits(Pro_con_data,_Component);function Pro_con_data(props){var _this;_classCallCheck(this,Pro_con_data);_this=_possibleConstructorReturn(this,_getPrototypeOf(Pro_con_data).call(this,props));_this.go_supp_page=function(){_this.props.navigation.goBack(null);};_this.process_data=function(rows,type){if(type=='products'){_this.setState({products_data:[].concat(_toConsumableArray(_this.state.products_data),_toConsumableArray(rows)),loadingmore:false});}if(type=='contacts'){_this.setState({contacts_data:[].concat(_toConsumableArray(_this.state.contacts_data),_toConsumableArray(rows)),loadingmore:false});}};_this.get_product_data=function(limit,supp_id){load_products(supp_id,limit).then(function(response){var data=JSON.parse(response);_this.process_data(data['data'],'products');});};_this.get_contact_data=function(limit,supp_id){load_contacts(supp_id,limit).then(function(response){var data=JSON.parse(response);_this.process_data(data['data'],'contacts');});};_this._onRefreshp=function(){_this.setState({isRefreshing:true});_this.setState({products_data:[]});_this.setState({limit:0});_this.get_product_data(0,_this.state.supplier_id);_this.setState({isRefreshing:false});_this.setState({loadmore_test:' '});};_this._onRefreshc=function(){_this.setState({isRefreshing:true});_this.setState({contacts_data:[]});_this.setState({limit:0});_this.get_contact_data(0,_this.state.supplier_id);_this.setState({isRefreshing:false});_this.setState({loadmore_test:' '});};_this.handleLoadMorep=function(){_this.setState({loadmore_test:'Loading...'});var limit=parseInt(_this.state.limit)+parseInt(20);_this.setState({limit:limit});_this.get_product_data(limit,_this.state.supplier_id);_this.setState({loadmore_test:'Scroll down to load more'});};_this.handleLoadMorec=function(){_this.setState({loadmore_test:'Loading...'});var limit=parseInt(_this.state.limit)+parseInt(20);_this.setState({limit:limit});_this.get_contact_data(limit,_this.state.supplier_id);_this.setState({loadmore_test:'Scroll down to load more'});};_this.setModalVisible=function _callee(state,type){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(type=='contacts')){_context.next=4;break;}_this.setState({contact_model:state});_context.next=4;return _regeneratorRuntime.awrap(_this._onRefreshc());case 4:if(!(type=='products')){_context.next=8;break;}_this.setState({product_model:state});_context.next=8;return _regeneratorRuntime.awrap(_this._onRefreshp());case 8:case\"end\":return _context.stop();}}});};_this.edit_it=function(id,type){if(type==\"product\"){_this.props.navigation.navigate('Edit_product',{product_id:id});}if(type==\"contact\"){_this.props.navigation.navigate('Edit_contact',{contact_id:id});}};_this.state={products_data:[],contacts_data:[],supplier_id:'',suppliername:'',limit:0,p_limit:0,c_limit:0,contact_model:false,product_model:false};return _this;}_createClass(Pro_con_data,[{key:\"componentDidMount\",value:function componentDidMount(){var params=this.props.navigation.state.params;var supplier_id=params['supp_id'];var suppliername=params['supp_name'];this.get_product_data(this.state.p_limit,supplier_id);this.get_contact_data(this.state.p_limit,supplier_id);this.setState({supplier_id:supplier_id,suppliername:suppliername});}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(View,{style:styles.container},this.state.contact_model?React.createElement(Modal,{animationType:\"slide\",transparent:false,visible:this.state.contact_model,onRequestClose:function onRequestClose(){_this2.setModalVisible(false,'contacts');}},React.createElement(TouchableOpacity,{style:{zIndex:10,position:\"absolute\",right:10,top:10},onPress:function onPress(){_this2.setModalVisible(false,'contacts');}},React.createElement(Image,{source:require(\"./../../../assets/img/close.png\"),style:{width:40,height:40,marginLeft:8}})),React.createElement(Create_contacts,{handle_visibility:this.setModalVisible.bind(this),single_supp:true,supp_id:this.state.supplier_id,suppliername:this.state.suppliername})):null,this.state.product_model?React.createElement(Modal,{animationType:\"slide\",transparent:false,visible:this.state.product_model,onRequestClose:function onRequestClose(){_this2.setModalVisible(false,'products');}},React.createElement(TouchableOpacity,{style:{zIndex:10,position:\"absolute\",right:10,top:10},onPress:function onPress(){_this2.setModalVisible(false,'products');}},React.createElement(Image,{source:require(\"./../../../assets/img/close.png\"),style:{width:40,height:40,marginLeft:8}})),React.createElement(Create_product,{handle_visibility:this.setModalVisible.bind(this),single_supp:true,supp_id:this.state.supplier_id,suppliername:this.state.suppliername})):null,React.createElement(View,{style:styles.inline_block},React.createElement(TouchableOpacity,{onPress:function onPress(){_this2.go_supp_page();}},React.createElement(Ionicons,{name:\"md-arrow-round-back\",size:60,style:{color:'black',marginRight:10}})),React.createElement(Text,{style:styles.heading},this.state.suppliername)),React.createElement(View,{style:{marginTop:10}},React.createElement(View,{style:{width:\"100%\",backgroundColor:\"#ed7d3182\",padding:5}},React.createElement(View,{style:styles.inline_block},React.createElement(TouchableOpacity,{onPress:function onPress(){_this2.setModalVisible(true,'contacts');}},React.createElement(MaterialIcons,{name:\"add-circle-outline\",size:35,color:\"#000000\"})),React.createElement(Text,{style:styles.add_name},\" CONTACTS\")),React.createElement(View,{style:{marginTop:5}},React.createElement(FlatList,{style:{height:212},horizontal:true,data:this.state.contacts_data,refreshControl:React.createElement(RefreshControl,{refreshing:this.state.isRefreshing,onRefresh:this._onRefreshc.bind(this)}),keyExtractor:function keyExtractor(item,index){return index.toString();},onEndReachedThreshold:3,onEndReached:this.handleLoadMorec.bind(this),renderItem:function renderItem(_ref){var item=_ref.item,index=_ref.index;return console.log(item),React.createElement(TouchableOpacity,{onPress:function onPress(){_this2.edit_it(item.contact_id,\"contact\");}},React.createElement(Contact_compo_e,{note:item.note,phone:item.phone,email:item.email,supplier_name:item.supplier_name,contact_name:item.contact_name,image:item.main_image.src}));}}))),React.createElement(View,{style:{width:\"100%\",backgroundColor:\"#8cc63e6b\",padding:5}},React.createElement(View,{style:styles.inline_block},React.createElement(TouchableOpacity,{onPress:function onPress(){_this2.setModalVisible(true,'products');}},React.createElement(MaterialIcons,{name:\"add-circle-outline\",size:35,color:\"#000000\"})),React.createElement(Text,{style:styles.add_name},\" PRODUCTS\")),React.createElement(View,{style:{marginTop:5,marginBottom:120}},React.createElement(FlatList,{style:{height:195},horizontal:true,data:this.state.products_data,refreshControl:React.createElement(RefreshControl,{refreshing:this.state.isRefreshing,onRefresh:this._onRefreshp.bind(this)}),keyExtractor:function keyExtractor(item,index){return index.toString();},onEndReachedThreshold:3,onEndReached:this.handleLoadMorep.bind(this),renderItem:function renderItem(_ref2){var item=_ref2.item,index=_ref2.index;return React.createElement(TouchableOpacity,{onPress:function onPress(){_this2.edit_it(item.product_id,\"product\");}},React.createElement(Product_compo_e,{product_id:item.product_id,note:item.note,moq:item.moq,fob_price:item.fob_price,product_name:item.product_name,supplier_name:item.supplier_name,image:item.main_image.src}));}})))));}}]);return Pro_con_data;}(Component);export{Pro_con_data as default};var styles=StyleSheet.create({container:{flex:1,margin:20},heading:{fontSize:22,color:\"#000000\",marginTop:10,marginBottom:10,fontWeight:\"bold\",width:\"70%\"},inline_block:{flexDirection:'row',alignSelf:'flex-start'},add_name:{marginTop:8,width:200,marginLeft:10,fontWeight:\"bold\",textAlignVertical:'top'}});","map":{"version":3,"sources":["D:/Notes_app/Pages/add_notes/explorer_data/Pro_con_data.js"],"names":["React","Component","SQLite","db","openDatabase","Contact_compo_e","Product_compo_e","Create_product","Create_contacts","MaterialIcons","Ionicons","Entypo","load_products","load_contacts","Pro_con_data","props","go_supp_page","navigation","goBack","process_data","rows","type","setState","products_data","state","loadingmore","contacts_data","get_product_data","limit","supp_id","then","response","data","JSON","parse","get_contact_data","_onRefreshp","isRefreshing","supplier_id","loadmore_test","_onRefreshc","handleLoadMorep","parseInt","handleLoadMorec","setModalVisible","contact_model","product_model","edit_it","id","navigate","product_id","contact_id","suppliername","p_limit","c_limit","params","styles","container","zIndex","position","right","top","require","width","height","marginLeft","bind","inline_block","color","marginRight","heading","marginTop","backgroundColor","padding","add_name","item","index","toString","console","log","note","phone","email","supplier_name","contact_name","main_image","src","marginBottom","moq","fob_price","product_name","StyleSheet","create","flex","margin","fontSize","fontWeight","flexDirection","alignSelf","textAlignVertical"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { View, Text, StyleSheet, FlatList, Modal, RefreshControl, ActivityIndicator, TouchableOpacity, Image } from 'react-native';\r\nimport { SQLite } from 'expo-sqlite';\r\nconst db = SQLite.openDatabase('db.db');\r\n\r\n\r\n\r\nimport Contact_compo_e from \"../../Explorer_components/Contact_compo_e\";\r\nimport Product_compo_e from \"../../Explorer_components/Product_compo_e\";\r\nimport Create_product from '../notes_components/Create_product';\r\nimport Create_contacts from '../notes_components/Create_contacts';\r\n\r\nimport { MaterialIcons, Ionicons, Entypo } from '@expo/vector-icons';\r\nimport { load_products,load_contacts } from '../../models/all_models';\r\n \r\n\r\nexport default class Pro_con_data extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            products_data: [],\r\n            contacts_data: [],\r\n            supplier_id: '',\r\n            suppliername: '',\r\n            limit:0,\r\n            p_limit: 0,\r\n            c_limit: 0,\r\n            contact_model: false,\r\n            product_model: false\r\n        };\r\n    }\r\n\r\n\r\n\r\n    componentDidMount() {\r\n        let params = this.props.navigation.state.params;\r\n        let supplier_id = params['supp_id'];\r\n        let suppliername = params['supp_name'];\r\n\r\n        this.get_product_data(this.state.p_limit, supplier_id);\r\n        this.get_contact_data(this.state.p_limit, supplier_id);\r\n\r\n        this.setState({\r\n            supplier_id: supplier_id,\r\n            suppliername: suppliername,\r\n        })\r\n\r\n    }\r\n\r\n    go_supp_page = () => {\r\n        // this.props.navigation.navigate('Add_supp');\r\n        this.props.navigation.goBack(null);\r\n    }\r\n\r\n\r\n\r\n    process_data = (rows, type) => {\r\n \r\n\r\n        if (type == 'products') {\r\n            this.setState({\r\n                products_data: [...this.state.products_data, ...rows],\r\n                loadingmore: false\r\n            })\r\n        }\r\n        if (type == 'contacts') {\r\n            this.setState({\r\n                contacts_data: [...this.state.contacts_data, ...rows],\r\n                loadingmore: false\r\n            })\r\n        }\r\n\r\n        // console.log(this.state.products_data)\r\n     \r\n    }\r\n\r\n\r\n    get_product_data = (limit, supp_id) => {\r\n\r\n        load_products(supp_id,limit).then((response) => { \r\n            var data   = JSON.parse(response);   \r\n            this.process_data(data['data'], 'products')\r\n        });\r\n \r\n    }\r\n\r\n    get_contact_data = (limit, supp_id) => {\r\n\r\n        load_contacts(supp_id,limit).then((response) => { \r\n            var data   = JSON.parse(response);   \r\n            this.process_data(data['data'], 'contacts')\r\n        });\r\n \r\n    }\r\n \r\n\r\n\r\n\r\n    ///// refresh_data ////////////////////\r\n    ////////////////////////////////////////  \r\n    _onRefreshp = () => {\r\n        this.setState({ isRefreshing: true })\r\n        this.setState({ products_data: [] })\r\n        this.setState({ limit: 0 })\r\n        this.get_product_data(0, this.state.supplier_id);\r\n        this.setState({ isRefreshing: false })\r\n        this.setState({ loadmore_test: ' ', });\r\n    }\r\n    _onRefreshc = () => {\r\n        this.setState({ isRefreshing: true })\r\n        this.setState({ contacts_data: [] })\r\n        this.setState({ limit: 0 })\r\n        this.get_contact_data(0, this.state.supplier_id);\r\n        this.setState({ isRefreshing: false })\r\n        this.setState({ loadmore_test: ' ', });\r\n    }\r\n\r\n    ///// LOAD MORE ////////////////////\r\n    ////////////////////////////////////////\r\n    handleLoadMorep = () => {\r\n\r\n        this.setState({ loadmore_test: 'Loading...', });\r\n        var limit = parseInt(this.state.limit) + parseInt(20);  // increase page by 1\r\n        this.setState({ limit: limit });\r\n        this.get_product_data(limit, this.state.supplier_id);  // method for API call \r\n        this.setState({ loadmore_test: 'Scroll down to load more', });\r\n    };\r\n    handleLoadMorec = () => {\r\n\r\n        this.setState({ loadmore_test: 'Loading...', });\r\n        var limit = parseInt(this.state.limit) + parseInt(20);  // increase page by 1\r\n        this.setState({ limit: limit });\r\n        this.get_contact_data(limit, this.state.supplier_id);  // method for API call \r\n        this.setState({ loadmore_test: 'Scroll down to load more', });\r\n\r\n    };\r\n    ////////////////////////////////////////    \r\n    ////////////////////////////////////////    \r\n\r\n\r\n\r\n    setModalVisible = async (state, type) => { \r\n        ////////Contacts Model\r\n        if (type == 'contacts') {\r\n            this.setState({\r\n                contact_model: state\r\n            })\r\n            await this._onRefreshc();\r\n        }\r\n        /////////Products model\r\n        if (type == 'products') {\r\n            this.setState({\r\n                product_model: state\r\n            })\r\n\r\n            await this._onRefreshp();\r\n        } \r\n\r\n    }\r\n\r\n    //////////////EDIT PRODUCT OR CONTACT\r\n    edit_it=(id,type)=>{\r\n        if(type == \"product\"){\r\n            this.props.navigation.navigate('Edit_product', {\r\n                product_id: id \r\n            });\r\n        }\r\n        if(type==\"contact\"){\r\n            this.props.navigation.navigate('Edit_contact', {\r\n                contact_id: id \r\n            });\r\n        }\r\n       \r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container} >\r\n                {this.state.contact_model ?\r\n                    <Modal\r\n                        animationType=\"slide\"\r\n                        transparent={false}\r\n                        visible={this.state.contact_model}\r\n                        onRequestClose={() => {\r\n                            this.setModalVisible(false, 'contacts')\r\n                        }}>\r\n                        <TouchableOpacity style={{ zIndex: 10, position: \"absolute\", right: 10, top: 10 }} onPress={() => { this.setModalVisible(false, 'contacts') }}>\r\n                            <Image\r\n                                source={require(\"./../../../assets/img/close.png\")}\r\n                                style={{ width: 40, height: 40, marginLeft: 8 }}\r\n                            />\r\n                        </TouchableOpacity>\r\n                        <Create_contacts handle_visibility={this.setModalVisible.bind(this)} single_supp={true} supp_id={this.state.supplier_id} suppliername={this.state.suppliername} />\r\n                    </Modal> : null}\r\n\r\n\r\n                {this.state.product_model ?\r\n                    <Modal\r\n                        animationType=\"slide\"\r\n                        transparent={false}\r\n                        visible={this.state.product_model}\r\n                        onRequestClose={() => {\r\n                            this.setModalVisible(false, 'products')\r\n                        }}>\r\n                        <TouchableOpacity style={{ zIndex: 10, position: \"absolute\", right: 10, top: 10 }} onPress={() => { this.setModalVisible(false, 'products') }}>\r\n                            <Image\r\n                                source={require('./../../../assets/img/close.png')}\r\n                                style={{ width: 40, height: 40, marginLeft: 8 }}\r\n                            />\r\n                        </TouchableOpacity>\r\n                        <Create_product handle_visibility={this.setModalVisible.bind(this)}  single_supp={true} supp_id={this.state.supplier_id} suppliername={this.state.suppliername} />\r\n                    </Modal> : null}\r\n\r\n\r\n                <View style={styles.inline_block}>\r\n                    <TouchableOpacity onPress={() => { this.go_supp_page() }} >\r\n                        <Ionicons name=\"md-arrow-round-back\" size={60} style={{ color: 'black', marginRight: 10, }} />\r\n                    </TouchableOpacity>\r\n                    <Text style={styles.heading}>{this.state.suppliername}</Text>\r\n                </View>\r\n\r\n\r\n                <View style={{ marginTop: 10 }}>\r\n                    <View style={{ width: \"100%\", backgroundColor: \"#ed7d3182\", padding: 5 }} >\r\n\r\n                        <View style={styles.inline_block}>\r\n                            <TouchableOpacity onPress={() => { this.setModalVisible(true, 'contacts') }}  >\r\n                                <MaterialIcons name=\"add-circle-outline\" size={35} color=\"#000000\" />\r\n                            </TouchableOpacity>\r\n                            <Text style={styles.add_name}> CONTACTS</Text>\r\n                        </View>\r\n\r\n                        <View style={{ marginTop: 5, }}>\r\n                            <FlatList\r\n                                style={{ height: 212 }}\r\n                                //    numColumns={3}\r\n                                horizontal={true}\r\n                                data={this.state.contacts_data}\r\n                                refreshControl={\r\n                                    <RefreshControl\r\n                                        refreshing={this.state.isRefreshing}\r\n                                        onRefresh={this._onRefreshc.bind(this)}\r\n                                    />\r\n                                }\r\n                                keyExtractor={(item, index) => index.toString()}\r\n                                onEndReachedThreshold={3}\r\n                                onEndReached={this.handleLoadMorec.bind(this)}\r\n                                renderItem={({ item, index }) => (\r\n                                        console.log(item),\r\n                                   \r\n                                    <TouchableOpacity onPress ={()=>{ this.edit_it(item.contact_id,\"contact\") }}>\r\n                                            <Contact_compo_e note={item.note} phone={item.phone} email={item.email} supplier_name={item.supplier_name} contact_name={item.contact_name} image={item.main_image.src} />\r\n                                        </TouchableOpacity>\r\n                                    \r\n\r\n                                )}\r\n                            />\r\n                        </View>\r\n\r\n                    </View>\r\n\r\n\r\n                    <View style={{ width: \"100%\", backgroundColor: \"#8cc63e6b\", padding: 5 }}>\r\n\r\n                        <View style={styles.inline_block}>\r\n                            <TouchableOpacity onPress={() => { this.setModalVisible(true, 'products') }}  >\r\n                                <MaterialIcons name=\"add-circle-outline\" size={35} color=\"#000000\" />\r\n                            </TouchableOpacity>\r\n                            <Text style={styles.add_name}> PRODUCTS</Text>\r\n\r\n                        </View>\r\n\r\n                        <View style={{ marginTop: 5, marginBottom: 120, }}>\r\n                            <FlatList\r\n                                // numColumns={2}\r\n                                style={{ height: 195 }}\r\n                                horizontal={true}\r\n                                data={this.state.products_data}\r\n                                refreshControl={\r\n                                    <RefreshControl\r\n                                        refreshing={this.state.isRefreshing}\r\n                                        onRefresh={this._onRefreshp.bind(this)}\r\n                                    />\r\n                                }\r\n                                keyExtractor={(item, index) => index.toString()}\r\n                                onEndReachedThreshold={3}\r\n                                onEndReached={this.handleLoadMorep.bind(this)}\r\n                                renderItem={({ item, index }) => (  \r\n                                    <TouchableOpacity onPress ={()=>{ this.edit_it(item.product_id,\"product\") }}>\r\n                                            <Product_compo_e product_id = {item.product_id} note={item.note} moq={item.moq} fob_price={item.fob_price} product_name={item.product_name} supplier_name={item.supplier_name} image={item.main_image.src} />\r\n                                        </TouchableOpacity>  \r\n                                )}\r\n                            />\r\n\r\n                        </View>\r\n                    </View>\r\n\r\n\r\n                </View>\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nconst styles =\r\n    StyleSheet.create({\r\n        container: {\r\n            flex: 1,\r\n            margin: 20,\r\n\r\n        },\r\n        heading: {\r\n            fontSize: 22,\r\n            color: \"#000000\",\r\n            marginTop: 10,\r\n            marginBottom: 10,\r\n            fontWeight: \"bold\",\r\n            width: \"70%\"\r\n        },\r\n        inline_block: {\r\n            flexDirection: 'row',\r\n            alignSelf: 'flex-start'\r\n        },\r\n        add_name: {\r\n            marginTop: 8,\r\n            width: 200,\r\n            marginLeft: 10,\r\n            fontWeight: \"bold\",\r\n            textAlignVertical: 'top'\r\n        }\r\n    });"]},"metadata":{},"sourceType":"module"}