{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import FlatList from\"react-native-web/dist/exports/FlatList\";import RefreshControl from\"react-native-web/dist/exports/RefreshControl\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import{SQLite}from'expo-sqlite';var db=SQLite.openDatabase('db.db');import Supplier_compo from\"../History_components/Supplier_compo\";import{tabs_data_load}from\"../models/all_models\";var Suppliers_tab=function(_Component){_inherits(Suppliers_tab,_Component);function Suppliers_tab(props){var _this;_classCallCheck(this,Suppliers_tab);_this=_possibleConstructorReturn(this,_getPrototypeOf(Suppliers_tab).call(this,props));_this.process_data=function(rows){_this.setState({suppliers_data:[].concat(_toConsumableArray(_this.state.suppliers_data),_toConsumableArray(rows)),loadingmore:false});};_this.get_data=function(limit){var tabname=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'supplier';tabs_data_load(limit,tabname).then(function(response){var data=JSON.parse(response);console.log(data.data);_this.process_data(data.data);});};_this._onRefresh=function(){_this.setState({isRefreshing:true});_this.setState({suppliers_data:[]});_this.setState({limit:0});_this.get_data(0);_this.setState({isRefreshing:false});_this.setState({loadmore_test:' '});};_this.handleLoadMore=function(){_this.setState({loadmore_test:'Loading...'});var limit=parseInt(_this.state.limit)+parseInt(20);_this.setState({limit:limit});_this.get_data(limit);_this.setState({loadmore_test:'Scroll down to load more'});};_this.state={suppliers_data:[],loadmore_test:'',isRefreshing:false,loadingmore:false,history_array:[],limit:0};return _this;}_createClass(Suppliers_tab,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.navigation.addListener('willFocus',function(route){_this2._onRefresh();});}},{key:\"render\",value:function render(){return React.createElement(View,{style:styles.container},this.state.loadingmore&&React.createElement(ActivityIndicator,{animating:this.state.loadingmore,size:\"large\",color:\"red\"}),React.createElement(FlatList,{numColumns:1,data:this.state.suppliers_data,refreshControl:React.createElement(RefreshControl,{refreshing:this.state.isRefreshing,onRefresh:this._onRefresh.bind(this)}),keyExtractor:function keyExtractor(item,index){return index.toString();},onEndReachedThreshold:3,onEndReached:this.handleLoadMore.bind(this),renderItem:function renderItem(_ref){var item=_ref.item,index=_ref.index;return React.createElement(View,null,React.createElement(Supplier_compo,{event_name:item.event_name,supplier_name:item.supplier_name}));}}),React.createElement(View,null,React.createElement(Text,null,this.state.loadmore_test)));}}]);return Suppliers_tab;}(Component);export{Suppliers_tab as default};var styles=StyleSheet.create({container:{flex:1,justifyContent:'center',alignItems:'center',backgroundColor:'#fff'},heading:{fontSize:22,color:\"#000000\",marginTop:10,width:100,marginBottom:20,fontWeight:\"bold\"}});","map":{"version":3,"sources":["D:/Notes_app/Pages/history_tabs/Suppliers_tab.js"],"names":["React","Component","SQLite","db","openDatabase","Supplier_compo","tabs_data_load","Suppliers_tab","props","process_data","rows","setState","suppliers_data","state","loadingmore","get_data","limit","tabname","then","response","data","JSON","parse","console","log","_onRefresh","isRefreshing","loadmore_test","handleLoadMore","parseInt","history_array","navigation","addListener","route","styles","container","bind","item","index","toString","event_name","supplier_name","StyleSheet","create","flex","justifyContent","alignItems","backgroundColor","heading","fontSize","color","marginTop","width","marginBottom","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { View, Text, StyleSheet,FlatList,RefreshControl,ActivityIndicator } from 'react-native';\r\n\r\nimport { SQLite } from 'expo-sqlite'; \r\nconst db = SQLite.openDatabase('db.db'); \r\nimport Supplier_compo from '../History_components/Supplier_compo'; \r\nimport { tabs_data_load } from '../models/all_models';\r\n \r\n\r\nexport default class Suppliers_tab extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            suppliers_data: [],\r\n            loadmore_test:'',\r\n            isRefreshing:false,\r\n            loadingmore:false, \r\n            history_array:[],\r\n            limit:0,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.get_data(this.state.limit);\r\n        this.props.navigation.addListener('willFocus', (route) => {\r\n          this._onRefresh();\r\n          });\r\n    }\r\n\r\n    process_data=(rows)=>{\r\n       \r\n        this.setState({  \r\n            suppliers_data:[...this.state.suppliers_data,...rows],\r\n            loadingmore:false\r\n        })\r\n    }\r\n\r\n    get_data = (limit,tabname='supplier') => {\r\n      \r\n        tabs_data_load(limit,tabname).then((response) => {  \r\n            var data   = JSON.parse(response);\r\n            console.log(data.data);\r\n            this.process_data(data.data)\r\n          \r\n        });   \r\n    }\r\n\r\n\r\n    _onRefresh=()=>{\r\n        this.setState({isRefreshing:true})\r\n        this.setState({suppliers_data:[]})\r\n        this.setState({limit:0})\r\n        this.get_data(0); \r\n        this.setState({isRefreshing:false})\r\n        this.setState({ loadmore_test:' ',}) ;\r\n    }\r\n\r\n        ///// LOAD MORE ////////////////////\r\n        handleLoadMore = () => {\r\n        \r\n            this.setState({ loadmore_test:'Loading...',}) ;\r\n            var limit = parseInt(this.state.limit) + parseInt(20);  // increase page by 1\r\n            this.setState({limit:limit});\r\n            this.get_data(limit);  // method for API call \r\n            this.setState({ loadmore_test:'Scroll down to load more',}) ;\r\n         \r\n        };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n                \r\n                {this.state.loadingmore &&\r\n                    <ActivityIndicator animating={this.state.loadingmore} size=\"large\" color=\"red\" />\r\n                }\r\n                <FlatList\r\n                    numColumns={1}\r\n                    data={this.state.suppliers_data}\r\n                    refreshControl={\r\n                        <RefreshControl\r\n                            refreshing={this.state.isRefreshing}\r\n                            onRefresh={this._onRefresh.bind(this)}\r\n                        />\r\n                    }\r\n                    keyExtractor={(item, index) => index.toString()}\r\n                    onEndReachedThreshold={3}\r\n                    onEndReached={this.handleLoadMore.bind(this)}\r\n                    renderItem={({ item, index }) => (\r\n\r\n\r\n\r\n                        <View>\r\n                                {/* {console.log(item.supplier_name)} */}\r\n                                  <Supplier_compo event_name={item.event_name} supplier_name = {item.supplier_name} /> \r\n                         \r\n                        </View>\r\n\r\n                    )}\r\n                />\r\n\r\n                <View>\r\n                    <Text>{this.state.loadmore_test}</Text>\r\n                </View>\r\n\r\n\r\n            </View>\r\n\r\n        );\r\n    }\r\n\r\n}\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: '#fff',\r\n        \r\n        \r\n    },\r\n    heading:{\r\n        fontSize:22,\r\n        color:\"#000000\",\r\n        marginTop: 10, \r\n        width:100,\r\n        marginBottom: 20,\r\n        fontWeight:\"bold\"\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}