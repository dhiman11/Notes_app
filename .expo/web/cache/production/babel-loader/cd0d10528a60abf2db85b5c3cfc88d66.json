{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from'react';import View from\"react-native-web/dist/exports/View\";import FlatList from\"react-native-web/dist/exports/FlatList\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Alert from\"react-native-web/dist/exports/Alert\";import Image from\"react-native-web/dist/exports/Image\";import AsyncStorage from\"react-native-web/dist/exports/AsyncStorage\";import*as ImagePicker from'expo-image-picker';import Images_upload_view from\"./Images_upload_view.js\";import{SafeAreaView}from'react-navigation';import*as Permissions from'expo-permissions';import{SQLite}from'expo-sqlite';import{insert_supplier}from\"../../models/all_models.js\";var db=SQLite.openDatabase('db.db');var Create_supplier=function(_Component){_inherits(Create_supplier,_Component);function Create_supplier(props){var _this;_classCallCheck(this,Create_supplier);_this=_possibleConstructorReturn(this,_getPrototypeOf(Create_supplier).call(this,props));_this.close_modal=function(value){_this.props.handle_visibility(value);};_this.choose_images=function _callee(){var _await$Permissions$as,status,result,img_array;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA_ROLL));case 2:_await$Permissions$as=_context.sent;status=_await$Permissions$as.status;if(status=='granted'){}else{}_context.next=7;return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({allowsEditing:false,aspect:[4,3],base64:true,quality:0.5}));case 7:result=_context.sent;img_array=[];if(result.base64){img_array.push(result.base64);}else{}_this.setState({images:[].concat(_toConsumableArray(_this.state.images),img_array)});case 11:case\"end\":return _context.stop();}}});};_this.click_images=function _callee2(){var _await$Permissions$as2,status,result,img_array;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.CAMERA));case 2:_await$Permissions$as2=_context2.sent;status=_await$Permissions$as2.status;if(status!=='granted'){}_context2.next=7;return _regeneratorRuntime.awrap(ImagePicker.launchCameraAsync({mediaTypes:ImagePicker.MediaTypeOptions.All,allowsEditing:false,aspect:[4,3],base64:true,quality:0.5}));case 7:result=_context2.sent;img_array=[];if(result.base64){img_array.push(result.base64);}else{}_this.setState({images:[].concat(_toConsumableArray(_this.state.images),img_array)});case 11:case\"end\":return _context2.stop();}}});};_this.update_supp_id=function(val1){_this.setState({supplier_id:val1.supplier_id,supplier_name:val1.suppliername,show_s_create_btn:false});};_this.fetchdata=function(){_this.setState({response:\" Note: Please wait we saving your data .... \"});var eventid=_this.state.event_id;var supplier_name=_this.state.supplier_name;var notes=_this.state.notes;var images=_this.state.images;if(supplier_name!=''){insert_supplier(eventid,supplier_name,notes,images).then(function(response){var supp_data=JSON.parse(response);if(supp_data){}_this.close_modal(false);});}else{alert('Please Fill Supplier name ');_this.setState({response:\"Please Fill Supplier name \"});}};_this.state={user_id:0,user_name:'',event_id:0,lastsupp:[],supplier_name:'',supplier_id:0,notes:'',images:[],response:' ',isCapturing:false,show_s_create_btn:false};return _this;}_createClass(Create_supplier,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({event_id:this.props.event_id,event_name:this.props.event_name});}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(SafeAreaView,{style:styles.container},React.createElement(ScrollView,null,React.createElement(View,null,React.createElement(Text,{style:{fontSize:22,marginBottom:10,fontWeight:\"bold\",color:\"#000000\"}},this.state.event_name),React.createElement(View,null,React.createElement(TextInput,{style:styles.inputfields,textAlign:\"left\",onChangeText:function onChangeText(text){return _this2.setState({supplier_name:text});},placeholderTextColor:\"#818181\",placeholder:\"Supplier Name\",ref:function ref(component){return _this2._textInput2=component;}})),React.createElement(View,null,React.createElement(TextInput,{multiline:true,numberOfLines:10,style:styles.textarea,textAlign:\"left\",onChangeText:function onChangeText(text){return _this2.setState({notes:text});},placeholderTextColor:\"#818181\",placeholder:\"Notes\",ref:function ref(component){return _this2._textInput5=component;}})),React.createElement(View,null,React.createElement(Text,{style:styles.response},this.state.response)),React.createElement(View,{style:styles.buttons},React.createElement(View,{style:styles.button},React.createElement(TouchableOpacity,{onPress:function onPress(){_this2.choose_images();},style:{width:40}},React.createElement(Image,{source:require(\"../../../assets/img/gallery.png\"),style:{width:40,height:40,marginLeft:8}}))),React.createElement(View,{style:styles.button},React.createElement(TouchableOpacity,{onPress:function onPress(){_this2.click_images();},style:{width:40}},React.createElement(Image,{source:require(\"../../../assets/img/camera.png\"),style:{width:40,height:40,marginLeft:8}}))),React.createElement(View,{style:styles.button},React.createElement(TouchableOpacity,{onPress:function onPress(){_this2.fetchdata();},style:{textAlign:\"center\",backgroundColor:\"#176fc1\",width:100,paddingLeft:20,paddingRight:20,paddingTop:10,paddingBottom:10}},React.createElement(Text,{style:{color:\"#fff\",textAlign:\"center\"}},\"SAVE\")))),React.createElement(View,null,React.createElement(FlatList,{numColumns:3,data:this.state.images,renderItem:function renderItem(_ref){var item=_ref.item;return React.createElement(Images_upload_view,{base64img:item});},ListFooterComponent:this.renderFooter,keyExtractor:function keyExtractor(item,index){return index.toString();}})))));}}]);return Create_supplier;}(Component);var styles=StyleSheet.create({container:{flex:1,margin:20,backgroundColor:'#fff'},buttons:{alignItems:\"flex-end\",textAlign:\"center\",marginTop:5,flexDirection:'row',flexWrap:'wrap'},add_supp:{backgroundColor:'#176fc1',paddingLeft:10,paddingTop:10,paddingBottom:10,minWidth:130,maxWidth:130},button:{width:'20%'},inputfields:{alignSelf:'stretch',opacity:0.4,marginTop:15,fontSize:18,backgroundColor:\"#fff\",maxHeight:40,minWidth:300,borderColor:\"gray\",borderWidth:1,paddingLeft:15},textarea:{alignSelf:'stretch',opacity:0.4,marginTop:15,fontSize:18,backgroundColor:\"#fff\",maxHeight:150,minWidth:300,borderColor:\"gray\",borderWidth:1,paddingLeft:15,textAlignVertical:'top'},response:{fontSize:20,color:\"red\",marginBottom:0},heading:{fontSize:18,fontWeight:\"normal\",borderColor:\"#176fc1\",borderWidth:1,backgroundColor:\"#176fc1\",color:\"#fff\",padding:5,marginBottom:10},camera:{flex:1,justifyContent:'space-between'}});export default Create_supplier;","map":{"version":3,"sources":["D:/Notes_app/Pages/add_notes/notes_components/Create_supplier.js"],"names":["React","Component","ImagePicker","Images_upload_view","SafeAreaView","Permissions","SQLite","insert_supplier","db","openDatabase","Create_supplier","props","close_modal","value","handle_visibility","choose_images","askAsync","CAMERA_ROLL","status","launchImageLibraryAsync","allowsEditing","aspect","base64","quality","result","img_array","push","setState","images","state","click_images","CAMERA","launchCameraAsync","mediaTypes","MediaTypeOptions","All","update_supp_id","val1","supplier_id","supplier_name","suppliername","show_s_create_btn","fetchdata","response","eventid","event_id","notes","then","supp_data","JSON","parse","alert","user_id","user_name","lastsupp","isCapturing","event_name","styles","container","fontSize","marginBottom","fontWeight","color","inputfields","text","component","_textInput2","textarea","_textInput5","buttons","button","width","require","height","marginLeft","textAlign","backgroundColor","paddingLeft","paddingRight","paddingTop","paddingBottom","item","renderFooter","index","toString","StyleSheet","create","flex","margin","alignItems","marginTop","flexDirection","flexWrap","add_supp","minWidth","maxWidth","alignSelf","opacity","maxHeight","borderColor","borderWidth","textAlignVertical","heading","padding","camera","justifyContent"],"mappings":"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","sourcesContent":["//import liraries\r\nimport React, { Component } from 'react';\r\nimport { View, FlatList, Text, TextInput, StyleSheet, TouchableOpacity, ScrollView, Alert, Image, AsyncStorage } from 'react-native';\r\n// import ImagePicker from 'react-native-image-crop-picker';\r\nimport * as ImagePicker from 'expo-image-picker';\r\nimport Images_upload_view from './Images_upload_view.js';\r\nimport { SafeAreaView } from 'react-navigation';\r\nimport * as Permissions from 'expo-permissions';\r\n \r\n\r\n////////////////////SQLLITE CONNECTION\r\nimport { SQLite } from 'expo-sqlite';\r\nimport { insert_supplier } from '../../models/all_models.js';\r\nconst db = SQLite.openDatabase('db.db');\r\n//////////////////////////////////////\r\n\r\nclass Create_supplier extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        //////////////////\r\n        this.state = {\r\n            user_id: 0,\r\n            user_name: '',\r\n            event_id: 0,\r\n            lastsupp: [],\r\n            supplier_name: '',\r\n            supplier_id: 0,\r\n            notes: '',\r\n            images: [],\r\n            response: ' ',\r\n            isCapturing: false,\r\n            show_s_create_btn: false\r\n\r\n        }\r\n        ///////////////////\r\n\r\n\r\n\r\n    }\r\n\r\n    componentDidMount() {  \r\n        this.setState({\r\n            event_id: this.props.event_id,\r\n            event_name: this.props.event_name,\r\n        })\r\n    }\r\n\r\n    //CLOSE MODAL////\r\n    /////////////////\r\n    close_modal = (value)=>{  \r\n            this.props.handle_visibility(value); \r\n        }  \r\n \r\n \r\n\r\n \r\n\r\n    /////////////////GET COOKIES DATA /////////////////////\r\n    ///////////////////////////////////////////////////////\r\n\r\n\r\n\r\n\r\n\r\n    /* ************************************************ */\r\n    // Choose images from camera\r\n    /* ************************************************ */\r\n    /* ************************************************ */ \r\n    choose_images = async () => { \r\n        const { status } = await Permissions.askAsync(Permissions.CAMERA_ROLL); \r\n        if (status == 'granted') {\r\n            // alert('Sorry, we need camera roll permissions to make this work!');\r\n            // alert(status)\r\n        } else {\r\n            // alert(status)\r\n        } \r\n        let result = await ImagePicker.launchImageLibraryAsync({\r\n            allowsEditing: false,\r\n            aspect: [4, 3],\r\n            base64: true,\r\n            quality:0.5\r\n        });\r\n\r\n        // console.log(result.base64);\r\n        var img_array = []; \r\n        if(result.base64){\r\n            img_array.push(result.base64);\r\n        }else{ \r\n        }  \r\n        this.setState({\r\n            images: [...this.state.images, ...img_array]\r\n        });   \r\n    }\r\n    /* ************************************************ */\r\n    /* ************************************************ */\r\n    /* ************************************************ */\r\n\r\n    // Click images from camera \r\n    ///////////////////////////\r\n    click_images = async () => { \r\n        const { status } = await Permissions.askAsync(Permissions.CAMERA);\r\n        if (status !== 'granted') {\r\n            // alert('Sorry, we need camera roll permissions to make this work!');\r\n\r\n        } \r\n        let result = await ImagePicker.launchCameraAsync({\r\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n            allowsEditing: false,\r\n            aspect: [4, 3],\r\n            base64: true,\r\n            quality:0.5\r\n        });\r\n  \r\n        var img_array = []; \r\n        if(result.base64){\r\n            img_array.push(result.base64);\r\n        }else{ \r\n        }\r\n\r\n        this.setState({\r\n            images: [...this.state.images, ...img_array]\r\n        });\r\n \r\n    }\r\n\r\n\r\n\r\n    ////// Set supplier id for the contact\r\n    //////////////////////////////////////\r\n    update_supp_id = (val1) => { \r\n        this.setState({\r\n            supplier_id: val1.supplier_id,\r\n            supplier_name: val1.suppliername,\r\n            show_s_create_btn: false\r\n        });   \r\n    }\r\n\r\n \r\n \r\n\r\n    ////// POST Form data //////////////////\r\n    //////////////////////////////////////\r\n    fetchdata = () => {\r\n\r\n        this.setState({\r\n            response: \" Note: Please wait we saving your data .... \",\r\n        });\r\n        \r\n        /* ****************** */\r\n        /* SUPPLIER FORM DATA */\r\n        /* ****************** */\r\n        let eventid = this.state.event_id;\r\n        let supplier_name = this.state.supplier_name; \r\n        let notes = this.state.notes;\r\n        let images = this.state.images;\r\n\r\n        /* ************************ */\r\n        /* IF SUPPLIER IS NOT EMPTY */\r\n        /* ************************ */\r\n        if (supplier_name != '') {\r\n            insert_supplier(eventid, supplier_name, notes, images).then((response) => {\r\n                var supp_data = JSON.parse(response);\r\n                if(supp_data){\r\n                    \r\n                }\r\n                this.close_modal(false);\r\n                // console.log(supp_data);\r\n                // this.setState({\r\n                //     all_suppliers: supp_data.data\r\n                // });\r\n            });\r\n        /* ************************ */\r\n        /* ************************ */   \r\n        } else {\r\n            alert('Please Fill Supplier name ');\r\n            this.setState({\r\n                response: \"Please Fill Supplier name \"\r\n\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        return (\r\n\r\n            <SafeAreaView style={styles.container}>\r\n                <ScrollView>\r\n                    <View >\r\n                        <Text style={{ fontSize: 22, marginBottom: 10, fontWeight: \"bold\", color: \"#000000\" }}>{this.state.event_name}</Text>\r\n\r\n\r\n\r\n                        <View>\r\n                            <TextInput\r\n                                style={styles.inputfields}\r\n                                textAlign=\"left\"\r\n                                onChangeText={(text) => this.setState({ supplier_name: text })}\r\n                                placeholderTextColor='#818181'\r\n                                placeholder=\"Supplier Name\"\r\n                                ref={component => this._textInput2 = component}\r\n\r\n                            />\r\n                        </View>\r\n\r\n\r\n                        <View>\r\n                            <TextInput\r\n                                multiline={true}\r\n                                numberOfLines={10}\r\n                                style={styles.textarea}\r\n                                textAlign=\"left\"\r\n                                onChangeText={(text) => this.setState({ notes: text })}\r\n                                placeholderTextColor='#818181'\r\n                                placeholder=\"Notes\"\r\n                                ref={component => this._textInput5 = component}\r\n                            />\r\n                        </View>\r\n                        {/* <Image \r\n                        style ={{width:25,height:25}}\r\n                        source={require('../assets/img/search.png')}\r\n                         /> */}\r\n\r\n\r\n                        <View>\r\n                            <Text style={styles.response}>{this.state.response}</Text>\r\n                        </View>\r\n                        {/* <View style={{alignItems:\"center\",alignContent:\"center\"}}>\r\n                                    <TouchableOpacity\r\n                                //  onPress={() => {this.submitForm()}}\r\n                                    style={{backgroundColor:\"#176fc1\",width:100,paddingLeft:20,paddingRight:20,paddingTop:10,paddingBottom:10}}>\r\n                                        <Text style={{color:\"#fff\"}}>Save</Text>\r\n                                    </TouchableOpacity>\r\n                                </View> */}\r\n                        <View style={styles.buttons}>\r\n\r\n                            <View style={styles.button}>\r\n                                <TouchableOpacity\r\n                                    onPress={() => { this.choose_images() }}\r\n                                    style={{ width: 40 }}>\r\n                                    <Image\r\n                                        source={require('../../../assets/img/gallery.png')}\r\n                                        style={{ width: 40, height: 40, marginLeft: 8 }}\r\n                                    />\r\n                                    {/* <Text style={{color:\"#000000\"}}> GALLERY</Text> */}\r\n                                </TouchableOpacity>\r\n                            </View>\r\n\r\n\r\n\r\n\r\n                            <View style={styles.button}>\r\n                                <TouchableOpacity\r\n                                    onPress={() => { this.click_images() }}\r\n                                    style={{ width: 40 }}>\r\n                                    <Image\r\n                                        source={require('../../../assets/img/camera.png')}\r\n                                        style={{ width: 40, height: 40, marginLeft: 8 }}\r\n                                    />\r\n                                    {/* <Text style={{color:\"#000000\"}}>CAMERA</Text> */}\r\n                                </TouchableOpacity>\r\n                            </View>\r\n\r\n\r\n\r\n\r\n                            <View style={styles.button}>\r\n                                <TouchableOpacity\r\n                                    onPress={() => { this.fetchdata() }}\r\n                                    style={{ textAlign: \"center\", backgroundColor: \"#176fc1\", width: 100, paddingLeft: 20, paddingRight: 20, paddingTop: 10, paddingBottom: 10 }}>\r\n                                    <Text style={{ color: \"#fff\", textAlign: \"center\" }}>SAVE</Text>\r\n                                </TouchableOpacity>\r\n                            </View>\r\n                        </View>\r\n\r\n\r\n                        <View>\r\n                            <FlatList\r\n                                numColumns={3}\r\n                                data={this.state.images}\r\n                                //data={this.state.images} \r\n                                //Item Separator View this.state.lastsuppliers\r\n                                renderItem={({ item }) => (\r\n                                    <Images_upload_view base64img={item} />\r\n                                )}\r\n                                ListFooterComponent={this.renderFooter}\r\n                                keyExtractor={(item, index) => index.toString()}\r\n\r\n                            />\r\n                        </View>\r\n\r\n\r\n\r\n\r\n\r\n                    </View>\r\n                </ScrollView>\r\n            </SafeAreaView>\r\n        );\r\n    }\r\n}\r\n\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        margin: 20,\r\n        backgroundColor: '#fff',\r\n    },\r\n    buttons: {\r\n        alignItems: \"flex-end\",\r\n        textAlign: \"center\",\r\n        marginTop: 5,\r\n        flexDirection: 'row',\r\n        flexWrap: 'wrap',\r\n\r\n    },\r\n    add_supp: {\r\n        backgroundColor: '#176fc1',\r\n        paddingLeft: 10,\r\n        paddingTop: 10,\r\n        paddingBottom: 10,\r\n        minWidth: 130,\r\n        maxWidth: 130,\r\n\r\n    },\r\n    button: {\r\n        width: '20%'\r\n    },\r\n\r\n    inputfields: {\r\n        alignSelf: 'stretch',\r\n        opacity: 0.4,\r\n        marginTop: 15,\r\n        fontSize: 18,\r\n        backgroundColor: \"#fff\",\r\n        maxHeight: 40,\r\n        minWidth: 300,\r\n        borderColor: \"gray\",\r\n        borderWidth: 1,\r\n        paddingLeft: 15\r\n    },\r\n    textarea: {\r\n        alignSelf: 'stretch',\r\n        opacity: 0.4,\r\n        marginTop: 15,\r\n        fontSize: 18,\r\n        backgroundColor: \"#fff\",\r\n        maxHeight: 150,\r\n        minWidth: 300,\r\n        borderColor: \"gray\",\r\n        borderWidth: 1,\r\n        paddingLeft: 15,\r\n        textAlignVertical: 'top',\r\n    },\r\n    response: {\r\n        fontSize: 20,\r\n        color: \"red\",\r\n        marginBottom: 0\r\n    },\r\n    heading: {\r\n        fontSize: 18,\r\n        fontWeight: \"normal\",\r\n        borderColor: \"#176fc1\",\r\n        borderWidth: 1,\r\n        backgroundColor: \"#176fc1\",\r\n        color: \"#fff\",\r\n        padding: 5,\r\n        marginBottom: 10\r\n    },\r\n    camera: {\r\n        flex: 1,\r\n        justifyContent: 'space-between',\r\n    }\r\n});\r\n\r\n\r\n//make this component available to the app\r\nexport default Create_supplier;\r\n"]},"metadata":{},"sourceType":"module"}