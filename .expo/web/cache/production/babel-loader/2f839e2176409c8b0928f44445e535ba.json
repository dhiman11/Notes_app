{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from'react';import View from\"react-native-web/dist/exports/View\";import Modal from\"react-native-web/dist/exports/Modal\";import Text from\"react-native-web/dist/exports/Text\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Image from\"react-native-web/dist/exports/Image\";import FlatList from\"react-native-web/dist/exports/FlatList\";import RefreshControl from\"react-native-web/dist/exports/RefreshControl\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{SQLite}from'expo-sqlite';var db=SQLite.openDatabase('db.db');import Product_compo from\"../History_components/Product_compo\";import Edit_product from\"../edit_note/Edit_product\";import{tabs_data_load}from\"../models/all_models\";var Products_tab_data=function(_Component){_inherits(Products_tab_data,_Component);function Products_tab_data(props){var _this;_classCallCheck(this,Products_tab_data);_this=_possibleConstructorReturn(this,_getPrototypeOf(Products_tab_data).call(this,props));_this.process_data=function(rows){_this.setState({products_data:[].concat(_toConsumableArray(_this.state.products_data),_toConsumableArray(rows)),loadingmore:false});console.log(_this.state.products_data);};_this.get_data=function(limit){var tabname=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'products';tabs_data_load(limit,tabname).then(function(response){var data=JSON.parse(response);console.log(data.data);_this.process_data(data.data);});};_this._onRefresh=function(){_this.setState({isRefreshing:true});_this.setState({products_data:[]});_this.setState({limit:0});_this.get_data(0);_this.setState({isRefreshing:false});_this.setState({loadmore_test:' '});};_this.handleLoadMore=function(){_this.setState({loadmore_test:'Loading...'});var limit=parseInt(_this.state.limit)+parseInt(20);_this.setState({limit:limit});_this.get_data(limit);_this.setState({loadmore_test:'Scroll down to load more'});};_this.edit_it=function(id,type){_this.props.navigation.navigate('Edit_product',{product_id:id});};_this.state={products_data:[],loadmore_test:'',isRefreshing:false,loadingmore:false,history_array:[],limit:0,edit:false,edit_id:0};return _this;}_createClass(Products_tab_data,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.navigation.addListener('willFocus',function(route){_this2._onRefresh();});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(View,{style:styles.container},React.createElement(Modal,{animationType:\"slide\",transparent:false,visible:this.state.edit,onRequestClose:function onRequestClose(){_this3.edit_data(false);}},React.createElement(TouchableOpacity,{style:{zIndex:10,position:\"absolute\",right:10,top:10},onPress:function onPress(){_this3.edit_data(false);}},React.createElement(Image,{source:require(\"../../assets/img/close.png\"),style:{width:40,height:40,marginLeft:8}})),React.createElement(Edit_product,{product_id:this.state.edit_id})),this.state.loadingmore&&React.createElement(ActivityIndicator,{animating:this.state.loadingmore,size:\"large\",color:\"red\"}),React.createElement(FlatList,{numColumns:1,data:this.state.products_data,refreshControl:React.createElement(RefreshControl,{refreshing:this.state.isRefreshing,onRefresh:this._onRefresh.bind(this)}),keyExtractor:function keyExtractor(item,index){return index.toString();},onEndReachedThreshold:3,onEndReached:this.handleLoadMore.bind(this),renderItem:function renderItem(_ref){var item=_ref.item,index=_ref.index;return React.createElement(View,null,React.createElement(TouchableOpacity,{onPress:function onPress(){_this3.edit_it(item.product_id);}},React.createElement(Product_compo,{note:item.note,moq:item.moq,fob_price:item.fob_price,product_name:item.product_name,supplier_name:item.supplier_name,image:item.main_image.src})));}}),React.createElement(View,null,React.createElement(Text,null,this.state.loadmore_test)));}}]);return Products_tab_data;}(Component);export{Products_tab_data as default};var styles=StyleSheet.create({container:{flex:1,justifyContent:'center',alignItems:'center',backgroundColor:'#fff'},heading:{fontSize:22,color:\"#000000\",marginTop:10,width:100,marginBottom:20,fontWeight:\"bold\"}});","map":{"version":3,"sources":["D:/Notes_app/Pages/history_tabs/Product_tab_data.js"],"names":["React","Component","SQLite","db","openDatabase","Product_compo","Edit_product","tabs_data_load","Products_tab_data","props","process_data","rows","setState","products_data","state","loadingmore","console","log","get_data","limit","tabname","then","response","data","JSON","parse","_onRefresh","isRefreshing","loadmore_test","handleLoadMore","parseInt","edit_it","id","type","navigation","navigate","product_id","history_array","edit","edit_id","addListener","route","styles","container","edit_data","zIndex","position","right","top","require","width","height","marginLeft","bind","item","index","toString","note","moq","fob_price","product_name","supplier_name","main_image","src","StyleSheet","create","flex","justifyContent","alignItems","backgroundColor","heading","fontSize","color","marginTop","marginBottom","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { View, Modal, Text, StyleSheet, Image, FlatList, RefreshControl, ActivityIndicator, TouchableOpacity } from 'react-native';\r\n\r\nimport { SQLite } from 'expo-sqlite';\r\nconst db = SQLite.openDatabase('db.db');\r\nimport Product_compo from '../History_components/Product_compo'; \r\nimport Edit_product from '../edit_note/Edit_product';\r\nimport { tabs_data_load } from '../models/all_models';\r\n \r\nexport default class Products_tab_data extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            products_data: [],\r\n            loadmore_test: '',\r\n            isRefreshing: false,\r\n            loadingmore: false,\r\n            history_array: [],\r\n            limit: 0,\r\n            edit: false,\r\n            edit_id: 0\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.get_data(this.state.limit);\r\n\r\n        this.props.navigation.addListener('willFocus', (route) => {\r\n            this._onRefresh();\r\n        });\r\n\r\n    }\r\n\r\n    process_data = (rows) => {\r\n\r\n        this.setState({\r\n            products_data: [...this.state.products_data, ...rows],\r\n            loadingmore: false\r\n        });\r\n\r\n        console.log(this.state.products_data);\r\n        \r\n    }\r\n\r\n    get_data = (limit,tabname='products') => {\r\n      \r\n        tabs_data_load(limit,tabname).then((response) => {  \r\n            var data   = JSON.parse(response);\r\n            console.log(data.data);\r\n            this.process_data(data.data)\r\n          \r\n        });   \r\n    }\r\n\r\n    _onRefresh = () => {\r\n        this.setState({ isRefreshing: true })\r\n        this.setState({ products_data: [] })\r\n        this.setState({ limit: 0 })\r\n        this.get_data(0);\r\n        this.setState({ isRefreshing: false })\r\n        this.setState({ loadmore_test: ' ', });\r\n    }\r\n\r\n    ///// LOAD MORE ////////////////////\r\n    handleLoadMore = () => {\r\n\r\n        this.setState({ loadmore_test: 'Loading...', });\r\n        var limit = parseInt(this.state.limit) + parseInt(20);  // increase page by 1\r\n        this.setState({ limit: limit });\r\n        this.get_data(limit);  // method for API call \r\n        this.setState({ loadmore_test: 'Scroll down to load more', });\r\n\r\n    };\r\n\r\n    //////////////EDIT PRODUCT OR CONTACT\r\n    edit_it = (id, type) => {   \r\n            this.props.navigation.navigate('Edit_product', {\r\n                product_id: id\r\n            });   \r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n\r\n                <Modal\r\n                    animationType=\"slide\"\r\n                    transparent={false}\r\n                    visible={this.state.edit}\r\n                    onRequestClose={() => {\r\n                        this.edit_data(false)\r\n                    }}>\r\n                    <TouchableOpacity style={{ zIndex: 10, position: \"absolute\", right: 10, top: 10 }} onPress={() => { this.edit_data(false) }}>\r\n                        <Image\r\n                            source={require('../../assets/img/close.png')}\r\n                            style={{ width: 40, height: 40, marginLeft: 8 }}\r\n                        />\r\n                    </TouchableOpacity>\r\n                    <Edit_product product_id={this.state.edit_id} />\r\n                </Modal>\r\n\r\n                {this.state.loadingmore &&\r\n                    <ActivityIndicator animating={this.state.loadingmore} size=\"large\" color=\"red\" />\r\n                }\r\n                <FlatList\r\n                    numColumns={1}\r\n                    data={this.state.products_data}\r\n                    refreshControl={\r\n                        <RefreshControl\r\n                            refreshing={this.state.isRefreshing}\r\n                            onRefresh={this._onRefresh.bind(this)}\r\n                        />\r\n                    }\r\n                    keyExtractor={(item, index) => index.toString()}\r\n                    onEndReachedThreshold={3}\r\n                    onEndReached={this.handleLoadMore.bind(this)}\r\n                    renderItem={({ item, index }) => (\r\n\r\n\r\n\r\n                        <View>\r\n\r\n                            <TouchableOpacity onPress={() => { this.edit_it(item.product_id) }}>\r\n                                <Product_compo note={item.note} moq={item.moq} fob_price={item.fob_price} product_name={item.product_name} supplier_name={item.supplier_name} image={item.main_image.src} />\r\n                            </TouchableOpacity>\r\n                        </View>\r\n\r\n                    )}\r\n                />\r\n\r\n                <View>\r\n                    <Text>{this.state.loadmore_test}</Text>\r\n                </View>\r\n\r\n\r\n            </View>\r\n\r\n        );\r\n    }\r\n\r\n}\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: '#fff',\r\n\r\n\r\n    },\r\n    heading: {\r\n        fontSize: 22,\r\n        color: \"#000000\",\r\n        marginTop: 10,\r\n        width: 100,\r\n        marginBottom: 20,\r\n        fontWeight: \"bold\"\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}