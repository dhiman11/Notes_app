{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _objectWithoutProperties from\"@babel/runtime/helpers/objectWithoutProperties\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import*as React from'react';import Animated from\"react-native-web/dist/exports/Animated\";import DeviceEventEmitter from\"react-native-web/dist/exports/DeviceEventEmitter\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import KeyboardAvoidingView from\"react-native-web/dist/exports/KeyboardAvoidingView\";import Modal from\"react-native-web/dist/exports/Modal\";import PanResponder from\"react-native-web/dist/exports/PanResponder\";import Platform from\"react-native-web/dist/exports/Platform\";import TouchableWithoutFeedback from\"react-native-web/dist/exports/TouchableWithoutFeedback\";import View from\"react-native-web/dist/exports/View\";import*as PropTypes from'prop-types';import*as animatable from'react-native-animatable';import{initializeAnimations,buildAnimations,reversePercentage}from\"./utils\";import styles from\"./modal.style\";initializeAnimations();var extractAnimationFromProps=function extractAnimationFromProps(props){return{animationIn:props.animationIn,animationOut:props.animationOut};};export var ReactNativeModal=function(_React$Component){_inherits(ReactNativeModal,_React$Component);function ReactNativeModal(props){var _this;_classCallCheck(this,ReactNativeModal);_this=_possibleConstructorReturn(this,_getPrototypeOf(ReactNativeModal).call(this,props));_this.state={showContent:true,isVisible:false,deviceWidth:Dimensions.get('window').width,deviceHeight:Dimensions.get('window').height,isSwipeable:_this.props.swipeDirection?true:false,pan:null};_this.isTransitioning=false;_this.inSwipeClosingState=false;_this.currentSwipingDirection=null;_this.panResponder=null;_this.buildPanResponder=function(){var animEvt=null;_this.panResponder=PanResponder.create({onMoveShouldSetPanResponder:function onMoveShouldSetPanResponder(evt,gestureState){if(!_this.props.propagateSwipe){var shouldSetPanResponder=Math.abs(gestureState.dx)>=4||Math.abs(gestureState.dy)>=4;if(shouldSetPanResponder&&_this.props.onSwipeStart){_this.props.onSwipeStart();}_this.currentSwipingDirection=_this.getSwipingDirection(gestureState);animEvt=_this.createAnimationEventForSwipe();return shouldSetPanResponder;}return false;},onStartShouldSetPanResponder:function onStartShouldSetPanResponder(){if(_this.props.scrollTo&&_this.props.scrollOffset>0){return false;}if(_this.props.onSwipeStart){_this.props.onSwipeStart();}_this.currentSwipingDirection=null;return true;},onPanResponderMove:function onPanResponderMove(evt,gestureState){if(!_this.currentSwipingDirection){if(gestureState.dx===0&&gestureState.dy===0){return;}_this.currentSwipingDirection=_this.getSwipingDirection(gestureState);animEvt=_this.createAnimationEventForSwipe();}if(_this.isSwipeDirectionAllowed(gestureState)){var newOpacityFactor=1-_this.calcDistancePercentage(gestureState);_this.backdropRef&&_this.backdropRef.transitionTo({opacity:_this.props.backdropOpacity*newOpacityFactor});animEvt(evt,gestureState);if(_this.props.onSwipeMove){_this.props.onSwipeMove(newOpacityFactor);}}else{if(_this.props.scrollTo){if(_this.props.scrollHorizontal){var offsetX=-gestureState.dx;if(offsetX>_this.props.scrollOffsetMax){offsetX-=(offsetX-_this.props.scrollOffsetMax)/2;}_this.props.scrollTo({x:offsetX,animated:false});}else{var offsetY=-gestureState.dy;if(offsetY>_this.props.scrollOffsetMax){offsetY-=(offsetY-_this.props.scrollOffsetMax)/2;}_this.props.scrollTo({y:offsetY,animated:false});}}}},onPanResponderRelease:function onPanResponderRelease(evt,gestureState){var accDistance=_this.getAccDistancePerDirection(gestureState);if(accDistance>_this.props.swipeThreshold&&_this.isSwipeDirectionAllowed(gestureState)){if(_this.props.onSwipeComplete){_this.inSwipeClosingState=true;_this.props.onSwipeComplete({swipingDirection:_this.getSwipingDirection(gestureState)});return;}if(_this.props.onSwipe){_this.inSwipeClosingState=true;_this.props.onSwipe();return;}}if(_this.props.onSwipeCancel){_this.props.onSwipeCancel();}if(_this.backdropRef){_this.backdropRef.transitionTo({opacity:_this.props.backdropOpacity});}Animated.spring(_this.state.pan,{toValue:{x:0,y:0},bounciness:0}).start();if(_this.props.scrollTo){if(_this.props.scrollOffset>_this.props.scrollOffsetMax){_this.props.scrollTo({y:_this.props.scrollOffsetMax,animated:true});}}}});};_this.getAccDistancePerDirection=function(gestureState){switch(_this.currentSwipingDirection){case'up':return-gestureState.dy;case'down':return gestureState.dy;case'right':return gestureState.dx;case'left':return-gestureState.dx;default:return 0;}};_this.getSwipingDirection=function(gestureState){if(Math.abs(gestureState.dx)>Math.abs(gestureState.dy)){return gestureState.dx>0?'right':'left';}return gestureState.dy>0?'down':'up';};_this.calcDistancePercentage=function(gestureState){switch(_this.currentSwipingDirection){case'down':return(gestureState.moveY-gestureState.y0)/((_this.props.deviceHeight||_this.state.deviceHeight)-gestureState.y0);case'up':return reversePercentage(gestureState.moveY/gestureState.y0);case'left':return reversePercentage(gestureState.moveX/gestureState.x0);case'right':return(gestureState.moveX-gestureState.x0)/((_this.props.deviceWidth||_this.state.deviceWidth)-gestureState.x0);default:return 0;}};_this.createAnimationEventForSwipe=function(){if(_this.currentSwipingDirection==='right'||_this.currentSwipingDirection==='left'){return Animated.event([null,{dx:_this.state.pan.x}]);}else{return Animated.event([null,{dy:_this.state.pan.y}]);}};_this.isDirectionIncluded=function(direction){return Array.isArray(_this.props.swipeDirection)?_this.props.swipeDirection.includes(direction):_this.props.swipeDirection===direction;};_this.isSwipeDirectionAllowed=function(_ref){var dy=_ref.dy,dx=_ref.dx;var draggedDown=dy>0;var draggedUp=dy<0;var draggedLeft=dx<0;var draggedRight=dx>0;if(_this.currentSwipingDirection==='up'&&_this.isDirectionIncluded('up')&&draggedUp){return true;}else if(_this.currentSwipingDirection==='down'&&_this.isDirectionIncluded('down')&&draggedDown){return true;}else if(_this.currentSwipingDirection==='right'&&_this.isDirectionIncluded('right')&&draggedRight){return true;}else if(_this.currentSwipingDirection==='left'&&_this.isDirectionIncluded('left')&&draggedLeft){return true;}return false;};_this.handleDimensionsUpdate=function(){if(!_this.props.deviceHeight&&!_this.props.deviceWidth){var deviceWidth=Dimensions.get('window').width;var deviceHeight=Dimensions.get('window').height;if(deviceWidth!==_this.state.deviceWidth||deviceHeight!==_this.state.deviceHeight){_this.setState({deviceWidth:deviceWidth,deviceHeight:deviceHeight});}}};_this.open=function(){if(_this.isTransitioning){return;}_this.isTransitioning=true;if(_this.backdropRef){_this.backdropRef.transitionTo({opacity:_this.props.backdropOpacity},_this.props.backdropTransitionInTiming);}if(_this.state.isSwipeable){_this.state.pan.setValue({x:0,y:0});}if(_this.contentRef){_this.props.onModalWillShow&&_this.props.onModalWillShow();_this.contentRef[_this.animationIn](_this.props.animationInTiming).then(function(){_this.isTransitioning=false;if(!_this.props.isVisible){_this.close();}else{_this.props.onModalShow();}});}};_this.close=function(){if(_this.isTransitioning){return;}_this.isTransitioning=true;if(_this.backdropRef){_this.backdropRef.transitionTo({opacity:0},_this.props.backdropTransitionOutTiming);}var animationOut=_this.animationOut;if(_this.inSwipeClosingState){_this.inSwipeClosingState=false;if(_this.currentSwipingDirection==='up'){animationOut='slideOutUp';}else if(_this.currentSwipingDirection==='down'){animationOut='slideOutDown';}else if(_this.currentSwipingDirection==='right'){animationOut='slideOutRight';}else if(_this.currentSwipingDirection==='left'){animationOut='slideOutLeft';}}if(_this.contentRef){_this.props.onModalWillHide&&_this.props.onModalWillHide();_this.contentRef[animationOut](_this.props.animationOutTiming).then(function(){_this.isTransitioning=false;if(_this.props.isVisible){_this.open();}else{_this.setState({showContent:false},function(){_this.setState({isVisible:false},function(){_this.props.onModalHide();});});}});}};var _buildAnimations=buildAnimations(extractAnimationFromProps(props)),animationIn=_buildAnimations.animationIn,animationOut=_buildAnimations.animationOut;_this.animationIn=animationIn;_this.animationOut=animationOut;if(_this.state.isSwipeable){_this.state=_objectSpread({},_this.state,{pan:new Animated.ValueXY()});_this.buildPanResponder();}if(props.isVisible){_this.state=_objectSpread({},_this.state,{isVisible:true,showContent:true});}return _this;}_createClass(ReactNativeModal,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.onSwipe){console.warn('`<Modal onSwipe=\"...\" />` is deprecated and will be removed starting from 13.0.0. Use `<Modal onSwipeComplete=\"...\" />` instead.');}DeviceEventEmitter.addListener('didUpdateDimensions',this.handleDimensionsUpdate);if(this.state.isVisible){this.open();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){DeviceEventEmitter.removeListener('didUpdateDimensions',this.handleDimensionsUpdate);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.animationIn!==prevProps.animationIn||this.props.animationOut!==prevProps.animationOut){var _buildAnimations2=buildAnimations(extractAnimationFromProps(this.props)),animationIn=_buildAnimations2.animationIn,animationOut=_buildAnimations2.animationOut;this.animationIn=animationIn;this.animationOut=animationOut;}if(this.props.backdropOpacity!==prevProps.backdropOpacity&&this.backdropRef){this.backdropRef.transitionTo({opacity:this.props.backdropOpacity},this.props.backdropTransitionInTiming);}if(this.props.isVisible&&!prevProps.isVisible){this.open();}else if(!this.props.isVisible&&prevProps.isVisible){this.close();}}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,animationIn=_this$props.animationIn,animationInTiming=_this$props.animationInTiming,animationOut=_this$props.animationOut,animationOutTiming=_this$props.animationOutTiming,avoidKeyboard=_this$props.avoidKeyboard,coverScreen=_this$props.coverScreen,hasBackdrop=_this$props.hasBackdrop,backdropColor=_this$props.backdropColor,backdropOpacity=_this$props.backdropOpacity,backdropTransitionInTiming=_this$props.backdropTransitionInTiming,backdropTransitionOutTiming=_this$props.backdropTransitionOutTiming,customBackdrop=_this$props.customBackdrop,children=_this$props.children,deviceHeightProp=_this$props.deviceHeight,deviceWidthProp=_this$props.deviceWidth,isVisible=_this$props.isVisible,onModalShow=_this$props.onModalShow,onBackdropPress=_this$props.onBackdropPress,onBackButtonPress=_this$props.onBackButtonPress,useNativeDriver=_this$props.useNativeDriver,propagateSwipe=_this$props.propagateSwipe,style=_this$props.style,otherProps=_objectWithoutProperties(_this$props,[\"animationIn\",\"animationInTiming\",\"animationOut\",\"animationOutTiming\",\"avoidKeyboard\",\"coverScreen\",\"hasBackdrop\",\"backdropColor\",\"backdropOpacity\",\"backdropTransitionInTiming\",\"backdropTransitionOutTiming\",\"customBackdrop\",\"children\",\"deviceHeight\",\"deviceWidth\",\"isVisible\",\"onModalShow\",\"onBackdropPress\",\"onBackButtonPress\",\"useNativeDriver\",\"propagateSwipe\",\"style\"]);var deviceWidth=deviceWidthProp||this.state.deviceWidth;var deviceHeight=deviceHeightProp||this.state.deviceHeight;var computedStyle=[{margin:deviceWidth*0.05,transform:[{translateY:0}]},styles.content,style];var panHandlers={};var panPosition={};if(this.state.isSwipeable){panHandlers=_objectSpread({},this.panResponder.panHandlers);if(useNativeDriver){panPosition={transform:this.state.pan.getTranslateTransform()};}else{panPosition=this.state.pan.getLayout();}}var _children=this.props.hideModalContentWhileAnimating&&this.props.useNativeDriver&&!this.state.showContent?React.createElement(animatable.View,null):children;var containerView=React.createElement(animatable.View,_extends({},panHandlers,{ref:function ref(_ref2){return _this2.contentRef=_ref2;},style:[panPosition,computedStyle],pointerEvents:\"box-none\",useNativeDriver:useNativeDriver},otherProps),_children);var hasCustomBackdrop=React.isValidElement(customBackdrop);var backdropComputedStyle=[{width:deviceWidth,height:deviceHeight,backgroundColor:this.state.showContent&&!hasCustomBackdrop?backdropColor:'transparent'}];var backdropContent=React.createElement(animatable.View,{ref:function ref(_ref3){return _this2.backdropRef=_ref3;},useNativeDriver:useNativeDriver,style:[styles.backdrop,backdropComputedStyle]},hasCustomBackdrop&&customBackdrop);var backdrop=null;if(hasCustomBackdrop){backdrop=backdropContent;}else{backdrop=React.createElement(TouchableWithoutFeedback,{onPress:onBackdropPress},backdropContent);}if(!coverScreen&&this.state.isVisible){return React.createElement(View,{pointerEvents:\"box-none\",style:[styles.backdrop,styles.containerBox]},hasBackdrop&&backdrop,containerView);}return React.createElement(Modal,_extends({transparent:true,animationType:'none',visible:this.state.isVisible,onRequestClose:onBackButtonPress},otherProps),hasBackdrop&&backdrop,avoidKeyboard&&React.createElement(KeyboardAvoidingView,{behavior:Platform.OS==='ios'?'padding':undefined,pointerEvents:\"box-none\",style:computedStyle.concat([{margin:0}])},containerView),!avoidKeyboard&&containerView);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,state){if(!state.isVisible&&nextProps.isVisible){return{isVisible:true,showContent:true};}return null;}}]);return ReactNativeModal;}(React.Component);ReactNativeModal.propTypes={animationIn:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),animationInTiming:PropTypes.number,animationOut:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),animationOutTiming:PropTypes.number,avoidKeyboard:PropTypes.bool,coverScreen:PropTypes.bool,hasBackdrop:PropTypes.bool,backdropColor:PropTypes.string,backdropOpacity:PropTypes.number,backdropTransitionInTiming:PropTypes.number,backdropTransitionOutTiming:PropTypes.number,customBackdrop:PropTypes.node,children:PropTypes.node.isRequired,deviceHeight:PropTypes.number,deviceWidth:PropTypes.number,isVisible:PropTypes.bool.isRequired,hideModalContentWhileAnimating:PropTypes.bool,propagateSwipe:PropTypes.bool,onModalShow:PropTypes.func,onModalWillShow:PropTypes.func,onModalHide:PropTypes.func,onModalWillHide:PropTypes.func,onBackButtonPress:PropTypes.func,onBackdropPress:PropTypes.func,onSwipeStart:PropTypes.func,onSwipeMove:PropTypes.func,onSwipeComplete:PropTypes.func,onSwipeCancel:PropTypes.func,swipeThreshold:PropTypes.number,swipeDirection:PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOf(['up','down','left','right'])),PropTypes.oneOf(['up','down','left','right'])]),useNativeDriver:PropTypes.bool,style:PropTypes.any,scrollTo:PropTypes.func,scrollOffset:PropTypes.number,scrollOffsetMax:PropTypes.number,scrollHorizontal:PropTypes.bool,supportedOrientations:PropTypes.arrayOf(PropTypes.oneOf(['portrait','portrait-upside-down','landscape','landscape-left','landscape-right']))};ReactNativeModal.defaultProps={animationIn:'slideInUp',animationInTiming:300,animationOut:'slideOutDown',animationOutTiming:300,avoidKeyboard:false,coverScreen:true,hasBackdrop:true,backdropColor:'black',backdropOpacity:0.7,backdropTransitionInTiming:300,backdropTransitionOutTiming:300,customBackdrop:null,useNativeDriver:false,deviceHeight:null,deviceWidth:null,hideModalContentWhileAnimating:false,propagateSwipe:false,isVisible:false,onModalShow:function onModalShow(){return null;},onModalWillShow:function onModalWillShow(){return null;},onModalHide:function onModalHide(){return null;},onModalWillHide:function onModalWillHide(){return null;},onBackdropPress:function onBackdropPress(){return null;},onBackButtonPress:function onBackButtonPress(){return null;},swipeThreshold:100,scrollTo:null,scrollOffset:0,scrollOffsetMax:0,scrollHorizontal:false,supportedOrientations:['portrait','landscape']};export default ReactNativeModal;","map":{"version":3,"sources":["D:/Notes_app/node_modules/react-native-modal/dist/modal.js"],"names":["React","PropTypes","animatable","initializeAnimations","buildAnimations","reversePercentage","styles","extractAnimationFromProps","props","animationIn","animationOut","ReactNativeModal","state","showContent","isVisible","deviceWidth","Dimensions","get","width","deviceHeight","height","isSwipeable","swipeDirection","pan","isTransitioning","inSwipeClosingState","currentSwipingDirection","panResponder","buildPanResponder","animEvt","PanResponder","create","onMoveShouldSetPanResponder","evt","gestureState","propagateSwipe","shouldSetPanResponder","Math","abs","dx","dy","onSwipeStart","getSwipingDirection","createAnimationEventForSwipe","onStartShouldSetPanResponder","scrollTo","scrollOffset","onPanResponderMove","isSwipeDirectionAllowed","newOpacityFactor","calcDistancePercentage","backdropRef","transitionTo","opacity","backdropOpacity","onSwipeMove","scrollHorizontal","offsetX","scrollOffsetMax","x","animated","offsetY","y","onPanResponderRelease","accDistance","getAccDistancePerDirection","swipeThreshold","onSwipeComplete","swipingDirection","onSwipe","onSwipeCancel","Animated","spring","toValue","bounciness","start","moveY","y0","moveX","x0","event","isDirectionIncluded","direction","Array","isArray","includes","draggedDown","draggedUp","draggedLeft","draggedRight","handleDimensionsUpdate","setState","open","backdropTransitionInTiming","setValue","contentRef","onModalWillShow","animationInTiming","then","close","onModalShow","backdropTransitionOutTiming","onModalWillHide","animationOutTiming","onModalHide","ValueXY","console","warn","DeviceEventEmitter","addListener","removeListener","prevProps","avoidKeyboard","coverScreen","hasBackdrop","backdropColor","customBackdrop","children","deviceHeightProp","deviceWidthProp","onBackdropPress","onBackButtonPress","useNativeDriver","style","otherProps","computedStyle","margin","transform","translateY","content","panHandlers","panPosition","getTranslateTransform","getLayout","_children","hideModalContentWhileAnimating","createElement","View","containerView","ref","pointerEvents","hasCustomBackdrop","isValidElement","backdropComputedStyle","backgroundColor","backdropContent","backdrop","TouchableWithoutFeedback","onPress","containerBox","Modal","transparent","animationType","visible","onRequestClose","KeyboardAvoidingView","behavior","Platform","OS","undefined","concat","nextProps","Component","propTypes","oneOfType","string","object","number","bool","node","isRequired","func","arrayOf","oneOf","any","supportedOrientations","defaultProps"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Animated, DeviceEventEmitter, Dimensions, KeyboardAvoidingView, Modal, PanResponder, Platform, TouchableWithoutFeedback, View, } from 'react-native';\nimport * as PropTypes from 'prop-types';\nimport * as animatable from 'react-native-animatable';\nimport { initializeAnimations, buildAnimations, reversePercentage, } from './utils';\nimport styles from './modal.style';\n// Override default react-native-animatable animations\ninitializeAnimations();\nconst extractAnimationFromProps = (props) => ({\n    animationIn: props.animationIn,\n    animationOut: props.animationOut,\n});\nexport class ReactNativeModal extends React.Component {\n    constructor(props) {\n        super(props);\n        // We use an internal state for keeping track of the modal visibility: this allows us to keep\n        // the modal visible during the exit animation, even if the user has already change the\n        // isVisible prop to false.\n        // We store in the state the device width and height so that we can update the modal on\n        // device rotation.\n        this.state = {\n            showContent: true,\n            isVisible: false,\n            deviceWidth: Dimensions.get('window').width,\n            deviceHeight: Dimensions.get('window').height,\n            isSwipeable: this.props.swipeDirection ? true : false,\n            pan: null,\n        };\n        this.isTransitioning = false;\n        this.inSwipeClosingState = false;\n        this.currentSwipingDirection = null;\n        this.panResponder = null;\n        this.buildPanResponder = () => {\n            let animEvt = null;\n            this.panResponder = PanResponder.create({\n                onMoveShouldSetPanResponder: (evt, gestureState) => {\n                    // Use propagateSwipe to allow inner content to scroll. See PR:\n                    // https://github.com/react-native-community/react-native-modal/pull/246\n                    if (!this.props.propagateSwipe) {\n                        // The number \"4\" is just a good tradeoff to make the panResponder\n                        // work correctly even when the modal has touchable buttons.\n                        // For reference:\n                        // https://github.com/react-native-community/react-native-modal/pull/197\n                        const shouldSetPanResponder = Math.abs(gestureState.dx) >= 4 || Math.abs(gestureState.dy) >= 4;\n                        if (shouldSetPanResponder && this.props.onSwipeStart) {\n                            this.props.onSwipeStart();\n                        }\n                        this.currentSwipingDirection = this.getSwipingDirection(gestureState);\n                        animEvt = this.createAnimationEventForSwipe();\n                        return shouldSetPanResponder;\n                    }\n                    return false;\n                },\n                onStartShouldSetPanResponder: () => {\n                    if (this.props.scrollTo && this.props.scrollOffset > 0) {\n                        return false; // user needs to be able to scroll content back up\n                    }\n                    if (this.props.onSwipeStart) {\n                        this.props.onSwipeStart();\n                    }\n                    // Cleared so that onPanResponderMove can wait to have some delta\n                    // to work with\n                    this.currentSwipingDirection = null;\n                    return true;\n                },\n                onPanResponderMove: (evt, gestureState) => {\n                    // Using onStartShouldSetPanResponder we don't have any delta so we don't know\n                    // The direction to which the user is swiping until some move have been done\n                    if (!this.currentSwipingDirection) {\n                        if (gestureState.dx === 0 && gestureState.dy === 0) {\n                            return;\n                        }\n                        this.currentSwipingDirection = this.getSwipingDirection(gestureState);\n                        animEvt = this.createAnimationEventForSwipe();\n                    }\n                    if (this.isSwipeDirectionAllowed(gestureState)) {\n                        // Dim the background while swiping the modal\n                        const newOpacityFactor = 1 - this.calcDistancePercentage(gestureState);\n                        this.backdropRef &&\n                            this.backdropRef.transitionTo({\n                                opacity: this.props.backdropOpacity * newOpacityFactor,\n                            });\n                        animEvt(evt, gestureState);\n                        if (this.props.onSwipeMove) {\n                            this.props.onSwipeMove(newOpacityFactor);\n                        }\n                    }\n                    else {\n                        if (this.props.scrollTo) {\n                            if (this.props.scrollHorizontal) {\n                                let offsetX = -gestureState.dx;\n                                if (offsetX > this.props.scrollOffsetMax) {\n                                    offsetX -= (offsetX - this.props.scrollOffsetMax) / 2;\n                                }\n                                this.props.scrollTo({ x: offsetX, animated: false });\n                            }\n                            else {\n                                let offsetY = -gestureState.dy;\n                                if (offsetY > this.props.scrollOffsetMax) {\n                                    offsetY -= (offsetY - this.props.scrollOffsetMax) / 2;\n                                }\n                                this.props.scrollTo({ y: offsetY, animated: false });\n                            }\n                        }\n                    }\n                },\n                onPanResponderRelease: (evt, gestureState) => {\n                    // Call the onSwipe prop if the threshold has been exceeded on the right direction\n                    const accDistance = this.getAccDistancePerDirection(gestureState);\n                    if (accDistance > this.props.swipeThreshold &&\n                        this.isSwipeDirectionAllowed(gestureState)) {\n                        if (this.props.onSwipeComplete) {\n                            this.inSwipeClosingState = true;\n                            this.props.onSwipeComplete({\n                                swipingDirection: this.getSwipingDirection(gestureState),\n                            });\n                            return;\n                        }\n                        // Deprecated. Remove later.\n                        if (this.props.onSwipe) {\n                            this.inSwipeClosingState = true;\n                            this.props.onSwipe();\n                            return;\n                        }\n                    }\n                    //Reset backdrop opacity and modal position\n                    if (this.props.onSwipeCancel) {\n                        this.props.onSwipeCancel();\n                    }\n                    if (this.backdropRef) {\n                        this.backdropRef.transitionTo({\n                            opacity: this.props.backdropOpacity,\n                        });\n                    }\n                    Animated.spring(this.state.pan, {\n                        toValue: { x: 0, y: 0 },\n                        bounciness: 0,\n                    }).start();\n                    if (this.props.scrollTo) {\n                        if (this.props.scrollOffset > this.props.scrollOffsetMax) {\n                            this.props.scrollTo({\n                                y: this.props.scrollOffsetMax,\n                                animated: true,\n                            });\n                        }\n                    }\n                },\n            });\n        };\n        this.getAccDistancePerDirection = (gestureState) => {\n            switch (this.currentSwipingDirection) {\n                case 'up':\n                    return -gestureState.dy;\n                case 'down':\n                    return gestureState.dy;\n                case 'right':\n                    return gestureState.dx;\n                case 'left':\n                    return -gestureState.dx;\n                default:\n                    return 0;\n            }\n        };\n        this.getSwipingDirection = (gestureState) => {\n            if (Math.abs(gestureState.dx) > Math.abs(gestureState.dy)) {\n                return gestureState.dx > 0 ? 'right' : 'left';\n            }\n            return gestureState.dy > 0 ? 'down' : 'up';\n        };\n        this.calcDistancePercentage = (gestureState) => {\n            switch (this.currentSwipingDirection) {\n                case 'down':\n                    return ((gestureState.moveY - gestureState.y0) /\n                        ((this.props.deviceHeight || this.state.deviceHeight) -\n                            gestureState.y0));\n                case 'up':\n                    return reversePercentage(gestureState.moveY / gestureState.y0);\n                case 'left':\n                    return reversePercentage(gestureState.moveX / gestureState.x0);\n                case 'right':\n                    return ((gestureState.moveX - gestureState.x0) /\n                        ((this.props.deviceWidth || this.state.deviceWidth) - gestureState.x0));\n                default:\n                    return 0;\n            }\n        };\n        this.createAnimationEventForSwipe = () => {\n            if (this.currentSwipingDirection === 'right' ||\n                this.currentSwipingDirection === 'left') {\n                return Animated.event([null, { dx: this.state.pan.x }]);\n            }\n            else {\n                return Animated.event([null, { dy: this.state.pan.y }]);\n            }\n        };\n        this.isDirectionIncluded = (direction) => {\n            return Array.isArray(this.props.swipeDirection)\n                ? this.props.swipeDirection.includes(direction)\n                : this.props.swipeDirection === direction;\n        };\n        this.isSwipeDirectionAllowed = ({ dy, dx }) => {\n            const draggedDown = dy > 0;\n            const draggedUp = dy < 0;\n            const draggedLeft = dx < 0;\n            const draggedRight = dx > 0;\n            if (this.currentSwipingDirection === 'up' &&\n                this.isDirectionIncluded('up') &&\n                draggedUp) {\n                return true;\n            }\n            else if (this.currentSwipingDirection === 'down' &&\n                this.isDirectionIncluded('down') &&\n                draggedDown) {\n                return true;\n            }\n            else if (this.currentSwipingDirection === 'right' &&\n                this.isDirectionIncluded('right') &&\n                draggedRight) {\n                return true;\n            }\n            else if (this.currentSwipingDirection === 'left' &&\n                this.isDirectionIncluded('left') &&\n                draggedLeft) {\n                return true;\n            }\n            return false;\n        };\n        this.handleDimensionsUpdate = () => {\n            if (!this.props.deviceHeight && !this.props.deviceWidth) {\n                // Here we update the device dimensions in the state if the layout changed\n                // (triggering a render)\n                const deviceWidth = Dimensions.get('window').width;\n                const deviceHeight = Dimensions.get('window').height;\n                if (deviceWidth !== this.state.deviceWidth ||\n                    deviceHeight !== this.state.deviceHeight) {\n                    this.setState({ deviceWidth, deviceHeight });\n                }\n            }\n        };\n        this.open = () => {\n            if (this.isTransitioning) {\n                return;\n            }\n            this.isTransitioning = true;\n            if (this.backdropRef) {\n                this.backdropRef.transitionTo({ opacity: this.props.backdropOpacity }, this.props.backdropTransitionInTiming);\n            }\n            // This is for resetting the pan position,otherwise the modal gets stuck\n            // at the last released position when you try to open it.\n            // TODO: Could certainly be improved - no idea for the moment.\n            if (this.state.isSwipeable) {\n                this.state.pan.setValue({ x: 0, y: 0 });\n            }\n            if (this.contentRef) {\n                this.props.onModalWillShow && this.props.onModalWillShow();\n                this.contentRef[this.animationIn](this.props.animationInTiming).then(() => {\n                    this.isTransitioning = false;\n                    if (!this.props.isVisible) {\n                        this.close();\n                    }\n                    else {\n                        this.props.onModalShow();\n                    }\n                });\n            }\n        };\n        this.close = () => {\n            if (this.isTransitioning) {\n                return;\n            }\n            this.isTransitioning = true;\n            if (this.backdropRef) {\n                this.backdropRef.transitionTo({ opacity: 0 }, this.props.backdropTransitionOutTiming);\n            }\n            let animationOut = this.animationOut;\n            if (this.inSwipeClosingState) {\n                this.inSwipeClosingState = false;\n                if (this.currentSwipingDirection === 'up') {\n                    animationOut = 'slideOutUp';\n                }\n                else if (this.currentSwipingDirection === 'down') {\n                    animationOut = 'slideOutDown';\n                }\n                else if (this.currentSwipingDirection === 'right') {\n                    animationOut = 'slideOutRight';\n                }\n                else if (this.currentSwipingDirection === 'left') {\n                    animationOut = 'slideOutLeft';\n                }\n            }\n            if (this.contentRef) {\n                this.props.onModalWillHide && this.props.onModalWillHide();\n                this.contentRef[animationOut](this.props.animationOutTiming).then(() => {\n                    this.isTransitioning = false;\n                    if (this.props.isVisible) {\n                        this.open();\n                    }\n                    else {\n                        this.setState({\n                            showContent: false,\n                        }, () => {\n                            this.setState({\n                                isVisible: false,\n                            }, () => {\n                                this.props.onModalHide();\n                            });\n                        });\n                    }\n                });\n            }\n        };\n        const { animationIn, animationOut } = buildAnimations(extractAnimationFromProps(props));\n        this.animationIn = animationIn;\n        this.animationOut = animationOut;\n        if (this.state.isSwipeable) {\n            this.state = {\n                ...this.state,\n                pan: new Animated.ValueXY(),\n            };\n            this.buildPanResponder();\n        }\n        if (props.isVisible) {\n            this.state = {\n                ...this.state,\n                isVisible: true,\n                showContent: true,\n            };\n        }\n    }\n    static getDerivedStateFromProps(nextProps, state) {\n        if (!state.isVisible && nextProps.isVisible) {\n            return { isVisible: true, showContent: true };\n        }\n        return null;\n    }\n    componentDidMount() {\n        // Show deprecation message\n        if (this.props.onSwipe) {\n            console.warn('`<Modal onSwipe=\"...\" />` is deprecated and will be removed starting from 13.0.0. Use `<Modal onSwipeComplete=\"...\" />` instead.');\n        }\n        DeviceEventEmitter.addListener('didUpdateDimensions', this.handleDimensionsUpdate);\n        if (this.state.isVisible) {\n            this.open();\n        }\n    }\n    componentWillUnmount() {\n        DeviceEventEmitter.removeListener('didUpdateDimensions', this.handleDimensionsUpdate);\n    }\n    componentDidUpdate(prevProps) {\n        // If the animations have been changed then rebuild them to make sure we're\n        // using the most up-to-date ones\n        if (this.props.animationIn !== prevProps.animationIn ||\n            this.props.animationOut !== prevProps.animationOut) {\n            const { animationIn, animationOut } = buildAnimations(extractAnimationFromProps(this.props));\n            this.animationIn = animationIn;\n            this.animationOut = animationOut;\n        }\n        // If backdrop opacity has been changed then make sure to update it\n        if (this.props.backdropOpacity !== prevProps.backdropOpacity &&\n            this.backdropRef) {\n            this.backdropRef.transitionTo({ opacity: this.props.backdropOpacity }, this.props.backdropTransitionInTiming);\n        }\n        // On modal open request, we slide the view up and fade in the backdrop\n        if (this.props.isVisible && !prevProps.isVisible) {\n            this.open();\n        }\n        else if (!this.props.isVisible && prevProps.isVisible) {\n            // On modal close request, we slide the view down and fade out the backdrop\n            this.close();\n        }\n    }\n    render() {\n        /* eslint-disable @typescript-eslint/no-unused-vars */\n        const { animationIn, animationInTiming, animationOut, animationOutTiming, avoidKeyboard, coverScreen, hasBackdrop, backdropColor, backdropOpacity, backdropTransitionInTiming, backdropTransitionOutTiming, customBackdrop, children, deviceHeight: deviceHeightProp, deviceWidth: deviceWidthProp, isVisible, onModalShow, onBackdropPress, onBackButtonPress, useNativeDriver, propagateSwipe, style, ...otherProps } = this.props;\n        const deviceWidth = deviceWidthProp || this.state.deviceWidth;\n        const deviceHeight = deviceHeightProp || this.state.deviceHeight;\n        const computedStyle = [\n            { margin: deviceWidth * 0.05, transform: [{ translateY: 0 }] },\n            styles.content,\n            style,\n        ];\n        let panHandlers = {};\n        let panPosition = {};\n        if (this.state.isSwipeable) {\n            panHandlers = { ...this.panResponder.panHandlers };\n            if (useNativeDriver) {\n                panPosition = {\n                    transform: this.state.pan.getTranslateTransform(),\n                };\n            }\n            else {\n                panPosition = this.state.pan.getLayout();\n            }\n        }\n        const _children = this.props.hideModalContentWhileAnimating &&\n            this.props.useNativeDriver &&\n            !this.state.showContent ? (React.createElement(animatable.View, null)) : (children);\n        const containerView = (React.createElement(animatable.View, Object.assign({}, panHandlers, { ref: ref => (this.contentRef = ref), style: [panPosition, computedStyle], pointerEvents: \"box-none\", useNativeDriver: useNativeDriver }, otherProps), _children));\n        const hasCustomBackdrop = React.isValidElement(customBackdrop);\n        const backdropComputedStyle = [\n            {\n                width: deviceWidth,\n                height: deviceHeight,\n                backgroundColor: this.state.showContent && !hasCustomBackdrop\n                    ? backdropColor\n                    : 'transparent',\n            },\n        ];\n        const backdropContent = (React.createElement(animatable.View, { ref: ref => (this.backdropRef = ref), useNativeDriver: useNativeDriver, style: [styles.backdrop, backdropComputedStyle] }, hasCustomBackdrop && customBackdrop));\n        let backdrop = null;\n        if (hasCustomBackdrop) {\n            backdrop = backdropContent;\n        }\n        else {\n            // If there's no custom backdrop, handle presses with\n            // TouchableWithoutFeedback\n            backdrop = (React.createElement(TouchableWithoutFeedback, { onPress: onBackdropPress }, backdropContent));\n        }\n        if (!coverScreen && this.state.isVisible) {\n            return (React.createElement(View, { pointerEvents: \"box-none\", style: [styles.backdrop, styles.containerBox] },\n                hasBackdrop && backdrop,\n                containerView));\n        }\n        return (React.createElement(Modal, Object.assign({ transparent: true, animationType: 'none', visible: this.state.isVisible, onRequestClose: onBackButtonPress }, otherProps),\n            hasBackdrop && backdrop,\n            avoidKeyboard && (React.createElement(KeyboardAvoidingView, { behavior: Platform.OS === 'ios' ? 'padding' : undefined, pointerEvents: \"box-none\", style: computedStyle.concat([{ margin: 0 }]) }, containerView)),\n            !avoidKeyboard && containerView));\n    }\n}\nReactNativeModal.propTypes = {\n    animationIn: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    animationInTiming: PropTypes.number,\n    animationOut: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\n    animationOutTiming: PropTypes.number,\n    avoidKeyboard: PropTypes.bool,\n    coverScreen: PropTypes.bool,\n    hasBackdrop: PropTypes.bool,\n    backdropColor: PropTypes.string,\n    backdropOpacity: PropTypes.number,\n    backdropTransitionInTiming: PropTypes.number,\n    backdropTransitionOutTiming: PropTypes.number,\n    customBackdrop: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    deviceHeight: PropTypes.number,\n    deviceWidth: PropTypes.number,\n    isVisible: PropTypes.bool.isRequired,\n    hideModalContentWhileAnimating: PropTypes.bool,\n    propagateSwipe: PropTypes.bool,\n    onModalShow: PropTypes.func,\n    onModalWillShow: PropTypes.func,\n    onModalHide: PropTypes.func,\n    onModalWillHide: PropTypes.func,\n    onBackButtonPress: PropTypes.func,\n    onBackdropPress: PropTypes.func,\n    onSwipeStart: PropTypes.func,\n    onSwipeMove: PropTypes.func,\n    onSwipeComplete: PropTypes.func,\n    onSwipeCancel: PropTypes.func,\n    swipeThreshold: PropTypes.number,\n    swipeDirection: PropTypes.oneOfType([\n        PropTypes.arrayOf(PropTypes.oneOf(['up', 'down', 'left', 'right'])),\n        PropTypes.oneOf(['up', 'down', 'left', 'right']),\n    ]),\n    useNativeDriver: PropTypes.bool,\n    style: PropTypes.any,\n    scrollTo: PropTypes.func,\n    scrollOffset: PropTypes.number,\n    scrollOffsetMax: PropTypes.number,\n    scrollHorizontal: PropTypes.bool,\n    supportedOrientations: PropTypes.arrayOf(PropTypes.oneOf([\n        'portrait',\n        'portrait-upside-down',\n        'landscape',\n        'landscape-left',\n        'landscape-right',\n    ])),\n};\nReactNativeModal.defaultProps = {\n    animationIn: 'slideInUp',\n    animationInTiming: 300,\n    animationOut: 'slideOutDown',\n    animationOutTiming: 300,\n    avoidKeyboard: false,\n    coverScreen: true,\n    hasBackdrop: true,\n    backdropColor: 'black',\n    backdropOpacity: 0.7,\n    backdropTransitionInTiming: 300,\n    backdropTransitionOutTiming: 300,\n    customBackdrop: null,\n    useNativeDriver: false,\n    deviceHeight: null,\n    deviceWidth: null,\n    hideModalContentWhileAnimating: false,\n    propagateSwipe: false,\n    isVisible: false,\n    onModalShow: () => null,\n    onModalWillShow: () => null,\n    onModalHide: () => null,\n    onModalWillHide: () => null,\n    onBackdropPress: () => null,\n    onBackButtonPress: () => null,\n    swipeThreshold: 100,\n    scrollTo: null,\n    scrollOffset: 0,\n    scrollOffsetMax: 0,\n    scrollHorizontal: false,\n    supportedOrientations: ['portrait', 'landscape'],\n};\nexport default ReactNativeModal;\n"]},"metadata":{},"sourceType":"module"}