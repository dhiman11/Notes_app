{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";import _inherits from\"@babel/runtime/helpers/inherits\";import React,{Component}from'react';import View from\"react-native-web/dist/exports/View\";import Image from\"react-native-web/dist/exports/Image\";import Text from\"react-native-web/dist/exports/Text\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import FlatList from\"react-native-web/dist/exports/FlatList\";import NetInfo from\"react-native-web/dist/exports/NetInfo\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import Product_list from\"../Products/Product_list\";import{TextInput,TouchableOpacity}from'react-native-gesture-handler';import Product_detail_modal from\"../modals/Product_detail_modal\";import{api_name}from\"../Settings\";var _Dimensions$get=Dimensions.get('window'),width=_Dimensions$get.width;var itemWidth=width/180;var Product_online=function(_Component){_inherits(Product_online,_Component);function Product_online(props){var _this;_classCallCheck(this,Product_online);_this=_possibleConstructorReturn(this,_getPrototypeOf(Product_online).call(this,props));_this.loadProducts=function(limit,categories,min_usd,max_usd,min_date,max_date,search_input,search_type,event_name,search_by_user){fetch(api_name+'products/ProductsList/all_products',{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({limit:limit,categories:categories,min_usd:min_usd,max_usd:max_usd,min_date:min_date,max_date:max_date,search_input:search_input,search_type:search_type,event_name:event_name,search_by_user:search_by_user})}).then(function(response){return response.json();}).then(function(responseJson){_this.setState({products_data:[].concat(_toConsumableArray(_this.state.products_data),_toConsumableArray(responseJson)),loadmore_btn_text:\"Load\",isLoading:false});}).catch(function(error){});};_this.renderFooter=function(btn_text){return React.createElement(View,{style:{paddingVertical:20,borderTopWidth:1,borderColor:\"#CED0CE\"}},React.createElement(View,null,React.createElement(TouchableOpacity,{onPress:function onPress(){_this.loadmore_products();},style:styles.loadmore},React.createElement(Text,{style:{color:\"#fff\"}},btn_text))));};_this.loadmore_products=function(){var loadmore_val=parseInt(_this.state.loadmore)+parseInt(10);_this.setState({loadmore:loadmore_val,loadmore_btn_text:\"Loading...\"});_this.loadProducts(loadmore_val,'',_this.state.min_usd,_this.state.max_price,'','',_this.state.search_input,'all','this_admin','all');};_this.search_products=function(){var resetload_more=0;_this.setState({loadmore:resetload_more,products_data:[],isLoading:true});_this.loadProducts(resetload_more,'',_this.state.min_usd,_this.state.max_price,'','',_this.state.search_input,'all','this_admin','all');};_this.show_product=function(product_id){_this.setState({prudut_detail_data:[],prudut_main_photo:[],product_all_images:[],prudut_detail_popup:true});fetch(api_name+'edit/edit/product/'+product_id,{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify({product_id:product_id})}).then(function(response){return response.json();}).then(function(responseJson){if(responseJson.result){_this.setState({prudut_detail_data:responseJson.product,prudut_main_photo:responseJson.product.main_image,product_all_images:responseJson.product.all_images});}}).catch(function(error){console.error(error);});};_this.show_hide_detail_modal=function(visible){_this.setState({prudut_detail_popup:visible});};_this.state={isLoading:true,isOnline:true,products_data:[],loadmore:0,loadmore_btn_text:'Load More',search_input:'',min_usd:0,max_usd:null,prudut_detail_popup:false,prudut_detail_data:[],prudut_main_photo:[],product_all_images:[]};_this.loadProducts(_this.state.loadmore,'',_this.state.min_usd,_this.state.max_price,'','',_this.state.search_input,'all','this_admin','all');return _this;}_createClass(Product_online,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.didFocusListener=this.props.navigation.addListener('didFocus',function(){_this2.setState({isLoading:true});_this2.setState({products_data:[]});_this2.setState({loadmore:0});_this2.loadProducts(_this2.state.loadmore,'',_this2.state.min_usd,_this2.state.max_price,'','',_this2.state.search_input,'all','this_admin','all');NetInfo.isConnected.fetch().then(function(res){_this2.setState({isOnline:res});});});}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.didFocusListener.remove();}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(View,null,this.state.isOnline?React.createElement(View,null,this.state.prudut_detail_popup?React.createElement(Product_detail_modal,{all_images:this.state.product_all_images,product_main_pic:this.state.prudut_main_photo,product_data:this.state.prudut_detail_data,modalvisibility:this.state.prudut_detail_popup,updateState:this.show_hide_detail_modal.bind(this)}):null,React.createElement(View,{style:{flexDirection:\"row\"}},React.createElement(TextInput,{onChangeText:function onChangeText(text){return _this3.setState({search_input:text});},onSubmitEditing:function onSubmitEditing(){return _this3.search_products();},style:{borderColor:\"red\",borderWidth:1,marginLeft:10,marginTop:10,width:300,paddingLeft:10},placeholder:\"Search here\"}),React.createElement(TouchableOpacity,{onPress:function onPress(){_this3.search_products();},style:{backgroundColor:\"red\",paddingLeft:23,paddingBottom:13,paddingTop:13,paddingRight:23,marginTop:10}},React.createElement(Image,{style:{width:25,height:25},source:require(\"../../assets/img/search.png\")}))),React.createElement(View,null,React.createElement(View,{style:{flexDirection:\"row\"}},React.createElement(TextInput,{onChangeText:function onChangeText(text){return _this3.setState({min_usd:text});},style:{borderColor:\"red\",borderWidth:1,marginTop:5,marginLeft:10,width:100,height:40,paddingLeft:10},placeholder:\"min price\"}),React.createElement(TextInput,{onChangeText:function onChangeText(text){return _this3.setState({max_usd:text});},style:{borderColor:\"red\",borderWidth:1,marginTop:5,marginLeft:10,width:100,height:40,paddingLeft:10},placeholder:\"max price\"}))),React.createElement(View,{style:{marginLeft:10}},React.createElement(Text,null,\"Looking for: \",this.state.search_input,\" .\")),this.state.isLoading&&React.createElement(ActivityIndicator,{animating:this.state.isLoading,size:\"large\",color:\"red\"}),React.createElement(FlatList,{style:styles.container,numColumns:parseInt(itemWidth),data:this.state.products_data,renderItem:function renderItem(_ref){var item=_ref.item;return React.createElement(Product_list,{updateState:_this3.show_product.bind(_this3),style:styles.rowcolumn,data:item});},ListFooterComponent:this.renderFooter(this.state.loadmore_btn_text),keyExtractor:function keyExtractor(item,index){return index.toString();}})):React.createElement(View,null,React.createElement(Text,null,\"You are offline\")));}}]);return Product_online;}(Component);var styles=StyleSheet.create({container:{padding:10,marginBottom:60},rowcolumn:{flexDirection:\"row\",flex:1},loadmore:{width:100,backgroundColor:\"red\",marginBottom:200,color:\"#fff\",marginLeft:10,padding:10}});export default Product_online;","map":{"version":3,"sources":["D:/Notes_app/Pages/product_tabs/Product_online.js"],"names":["React","Component","Product_list","TextInput","TouchableOpacity","Product_detail_modal","api_name","Dimensions","get","width","itemWidth","Product_online","props","loadProducts","limit","categories","min_usd","max_usd","min_date","max_date","search_input","search_type","event_name","search_by_user","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","responseJson","setState","products_data","state","loadmore_btn_text","isLoading","catch","error","renderFooter","btn_text","paddingVertical","borderTopWidth","borderColor","loadmore_products","styles","loadmore","color","loadmore_val","parseInt","max_price","search_products","resetload_more","show_product","product_id","prudut_detail_data","prudut_main_photo","product_all_images","prudut_detail_popup","result","product","main_image","all_images","console","show_hide_detail_modal","visible","isOnline","didFocusListener","navigation","addListener","NetInfo","isConnected","res","remove","bind","flexDirection","text","borderWidth","marginLeft","marginTop","paddingLeft","backgroundColor","paddingBottom","paddingTop","paddingRight","height","require","container","item","rowcolumn","index","toString","StyleSheet","create","padding","marginBottom","flex"],"mappings":"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","sourcesContent":["//import liraries\r\nimport React, { Component } from 'react';\r\nimport { View, Image, Text, ActivityIndicator, StyleSheet, FlatList, NetInfo,Dimensions  } from 'react-native';\r\nimport Product_list from '../Products/Product_list';\r\nimport { TextInput, TouchableOpacity } from 'react-native-gesture-handler';\r\nimport Product_detail_modal from '../modals/Product_detail_modal';\r\nimport { api_name } from '../Settings';\r\n \r\nconst {width} = Dimensions.get('window');\r\nconst itemWidth = (width) / 180;\r\n\r\n// create a component\r\nclass Product_online extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoading: true,\r\n            isOnline: true,\r\n            products_data: [],\r\n            loadmore: 0,\r\n            loadmore_btn_text: 'Load More',\r\n            search_input: '',\r\n            min_usd: 0,\r\n            max_usd: null,\r\n            prudut_detail_popup: false,\r\n            prudut_detail_data: [],\r\n            prudut_main_photo: [],\r\n            product_all_images: []\r\n        }\r\n        this.loadProducts(this.state.loadmore, '', this.state.min_usd, this.state.max_price, '', '', this.state.search_input, 'all', 'this_admin', 'all');\r\n    }\r\n\r\n\r\n    /////////////////////////////////////////////////////\r\n    ////////////// Reload Data when Change Tab //////////\r\n\r\n    componentDidMount() {\r\n        this.didFocusListener = this.props.navigation.addListener(\r\n            'didFocus',\r\n            () => {\r\n                this.setState({ isLoading: true });\r\n                this.setState({ products_data: [] });\r\n                this.setState({ loadmore: 0 });\r\n                this.loadProducts(this.state.loadmore, '', this.state.min_usd, this.state.max_price, '', '', this.state.search_input, 'all', 'this_admin', 'all');\r\n\r\n                NetInfo.isConnected.fetch().then(res => {\r\n                    this.setState({\r\n                        isOnline: res\r\n                    });\r\n                })\r\n            },\r\n        );\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.didFocusListener.remove();\r\n    }\r\n\r\n    /////////////////////////////////////////////////////\r\n    ////////////// Reload Data when Change Tab //////////\r\n\r\n\r\n\r\n\r\n    /////////Load Product Request/////////\r\n    ///////////////////////////////////\r\n    loadProducts = (limit, categories, min_usd, max_usd, min_date, max_date, search_input, search_type, event_name, search_by_user) => {\r\n\r\n        fetch(api_name+'products/ProductsList/all_products', {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                limit: limit,\r\n                categories: categories,\r\n                min_usd: min_usd,\r\n                max_usd: max_usd,\r\n                min_date: min_date,\r\n                max_date: max_date,\r\n                search_input: search_input,\r\n                search_type: search_type,\r\n                event_name: event_name,\r\n                search_by_user: search_by_user\r\n            }),\r\n        }).then((response) => response.json())\r\n            .then((responseJson) => {\r\n\r\n                this.setState({\r\n                    products_data: [...this.state.products_data, ...responseJson],\r\n                    loadmore_btn_text: \"Load\",\r\n                    isLoading: false\r\n                }) //another array\r\n\r\n            })\r\n            .catch((error) => {\r\n                // console.error(error);\r\n            });\r\n    }\r\n\r\n    ////////////Footer Load more///////////////\r\n    /////////////////////////////////////////\r\n    renderFooter = (btn_text) => {\r\n        return (\r\n            <View\r\n                style={{\r\n                    paddingVertical: 20,\r\n                    borderTopWidth: 1,\r\n                    borderColor: \"#CED0CE\"\r\n                }}\r\n            >\r\n                <View>\r\n                    <TouchableOpacity onPress={() => { this.loadmore_products() }} style={styles.loadmore}>\r\n                        <Text style={{ color: \"#fff\" }}>{btn_text}</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n\r\n            </View>\r\n\r\n\r\n\r\n\r\n\r\n        );\r\n    };\r\n\r\n    //////////Load More detail////////////\r\n    ///////////////////////////////////\r\n\r\n    loadmore_products = () => {\r\n        var loadmore_val = parseInt(this.state.loadmore) + parseInt(10);\r\n        this.setState({\r\n            loadmore: loadmore_val,\r\n            loadmore_btn_text: \"Loading...\"\r\n        });\r\n\r\n\r\n        this.loadProducts(loadmore_val, '', this.state.min_usd, this.state.max_price, '', '', this.state.search_input, 'all', 'this_admin', 'all');\r\n\r\n    }\r\n\r\n    search_products = () => {\r\n        /////////////RESET PRODUCT SCREEN///////////\r\n        var resetload_more = 0;\r\n\r\n        this.setState({\r\n            loadmore: resetload_more,\r\n            products_data: [],\r\n            isLoading: true,\r\n        })\r\n\r\n\r\n        ///////////////////////////////\r\n        //////++++++++++++++++++++++++\r\n        ///// LOAD NEW DATA ++++++++++\r\n\r\n        this.loadProducts(resetload_more, '', this.state.min_usd, this.state.max_price, '', '', this.state.search_input, 'all', 'this_admin', 'all');\r\n\r\n        /////////////////////////////\r\n\r\n    }\r\n\r\n\r\n    //////////// Show product Edit ///////////////////\r\n    //////////////////////////////////////////////////\r\n    show_product = (product_id) => {\r\n\r\n        this.setState({\r\n            prudut_detail_data: [],\r\n            prudut_main_photo: [],\r\n            product_all_images: [],\r\n            prudut_detail_popup: true\r\n        })\r\n\r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++//// \r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++////\r\n\r\n        fetch(api_name+'edit/edit/product/' + product_id, {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                product_id: product_id,\r\n            }),\r\n        }).then((response) => response.json())\r\n            .then((responseJson) => {\r\n\r\n                if (responseJson.result) {\r\n\r\n                    this.setState({\r\n                        prudut_detail_data: responseJson.product,\r\n                        prudut_main_photo: responseJson.product.main_image,\r\n                        product_all_images: responseJson.product.all_images,\r\n                    })\r\n                }\r\n\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n\r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++////\r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++////\r\n\r\n    }\r\n    //////////////////////////////////////////////////\r\n    //////////////////////////////////////////////////\r\n\r\n\r\n    //////////// Show Hide popup ///////////////////\r\n    //////////////////////////////////////////////////\r\n    show_hide_detail_modal = (visible) => {\r\n\r\n        this.setState({\r\n            prudut_detail_popup: visible\r\n        });\r\n\r\n\r\n\r\n    }\r\n    //////////////////////////////////////////////////\r\n    //////////////////////////////////////////////////\r\n\r\n    render() {\r\n        return (\r\n            <View>\r\n            {this.state.isOnline ? \r\n                    <View>  \r\n                        {this.state.prudut_detail_popup ? <Product_detail_modal all_images={this.state.product_all_images} product_main_pic={this.state.prudut_main_photo} product_data={this.state.prudut_detail_data} modalvisibility={this.state.prudut_detail_popup} updateState={this.show_hide_detail_modal.bind(this)} /> : null}\r\n\r\n                        <View style={{ flexDirection: \"row\" }}>\r\n                            <TextInput\r\n                                onChangeText={(text) => this.setState({ search_input: text })}\r\n                                onSubmitEditing={() => this.search_products()}\r\n                                style={{ borderColor: \"red\", borderWidth: 1, marginLeft: 10, marginTop: 10, width: 300,paddingLeft:10 }}\r\n                                placeholder=\"Search here\"\r\n                            />\r\n                            <TouchableOpacity onPress={() => {\r\n\r\n                                this.search_products();\r\n\r\n                            }} style={{ backgroundColor: \"red\", paddingLeft: 23, paddingBottom: 13, paddingTop: 13, paddingRight: 23, marginTop: 10 }}>\r\n                                <Image\r\n                                    style={{ width: 25, height: 25 }}\r\n                                    source={require('../../assets/img/search.png')}\r\n                                />\r\n                            </TouchableOpacity>\r\n                        </View>\r\n\r\n                        <View>\r\n                            <View style={{ flexDirection: \"row\" }}>\r\n                                <TextInput\r\n                                    onChangeText={(text) => this.setState({ min_usd: text })}\r\n                                    style={{ borderColor: \"red\", borderWidth: 1, marginTop: 5, marginLeft: 10, width: 100, height: 40,paddingLeft:10 }}\r\n                                    placeholder=\"min price\"\r\n                                />\r\n                                <TextInput\r\n                                    onChangeText={(text) => this.setState({ max_usd: text })}\r\n                                    style={{ borderColor: \"red\", borderWidth: 1, marginTop: 5, marginLeft: 10, width: 100, height: 40,paddingLeft:10 }}\r\n                                    placeholder=\"max price\"\r\n                                />\r\n                            </View>\r\n                        </View>\r\n\r\n                        <View style={{ marginLeft: 10 }}>\r\n                            <Text>Looking for: {this.state.search_input} .</Text>\r\n                        </View>\r\n\r\n                        {this.state.isLoading &&\r\n                            <ActivityIndicator animating={this.state.isLoading} size=\"large\" color=\"red\" />\r\n                        }\r\n                      \r\n                        <FlatList\r\n                            style={styles.container}\r\n                            numColumns={parseInt(itemWidth)}\r\n                            data={this.state.products_data}\r\n                            //Item Separator View\r\n                            renderItem={({ item }) => (\r\n\r\n\r\n                                <Product_list updateState={this.show_product.bind(this)} style={styles.rowcolumn} data={item} />\r\n\r\n                            )}\r\n\r\n                            ListFooterComponent={this.renderFooter(this.state.loadmore_btn_text)}\r\n                            keyExtractor={(item, index) => index.toString()}\r\n\r\n                        />\r\n\r\n\r\n\r\n\r\n\r\n\r\n                    </View>:\r\n                    <View>\r\n                        <Text>You are offline</Text>\r\n                        </View>\r\n                    }\r\n\r\n            </View>\r\n\r\n\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        padding: 10,\r\n        marginBottom: 60,\r\n    },\r\n    rowcolumn: {\r\n        flexDirection: \"row\",\r\n        flex: 1,\r\n    },\r\n    loadmore: {\r\n        width: 100,\r\n        backgroundColor: \"red\",\r\n        marginBottom: 200,\r\n        color: \"#fff\",\r\n        marginLeft: 10,\r\n        padding: 10\r\n    }\r\n\r\n});\r\n\r\n//make this component available to the app\r\nexport default Product_online;\r\n"]},"metadata":{},"sourceType":"module"}