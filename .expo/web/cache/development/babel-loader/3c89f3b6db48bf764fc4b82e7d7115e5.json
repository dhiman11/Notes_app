{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"D:\\\\Notes_app\\\\Pages\\\\history_tabs\\\\Contact_tab_data.js\";\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { SQLite } from 'expo-sqlite';\nimport Contact_compo from \"../History_components/Contact_compo\";\nimport Edit_contact from \"../edit_note/Edit_contact\";\nimport { tabs_data_load } from \"../models/all_models\";\nvar db = SQLite.openDatabase('db.db');\n\nvar Contacts_tab_data = function (_Component) {\n  _inherits(Contacts_tab_data, _Component);\n\n  function Contacts_tab_data(props) {\n    var _this;\n\n    _classCallCheck(this, Contacts_tab_data);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Contacts_tab_data).call(this, props));\n\n    _this.process_data = function (rows) {\n      _this.setState({\n        contacts_data: [].concat(_toConsumableArray(_this.state.contacts_data), _toConsumableArray(rows)),\n        loadingmore: false\n      });\n    };\n\n    _this.get_data = function (limit) {\n      var tabname = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contacts';\n      tabs_data_load(limit, tabname).then(function (response) {\n        var data = JSON.parse(response);\n        console.log(data.data);\n\n        _this.process_data(data.data);\n      });\n    };\n\n    _this._onRefresh = function () {\n      _this.setState({\n        isRefreshing: true\n      });\n\n      _this.setState({\n        contacts_data: []\n      });\n\n      _this.setState({\n        limit: 0\n      });\n\n      _this.get_data(0);\n\n      _this.setState({\n        isRefreshing: false\n      });\n\n      _this.setState({\n        loadmore_test: ' '\n      });\n    };\n\n    _this.handleLoadMore = function () {\n      _this.setState({\n        loadmore_test: 'Loading...'\n      });\n\n      var limit = parseInt(_this.state.limit) + parseInt(20);\n\n      _this.setState({\n        limit: limit\n      });\n\n      _this.get_data(limit);\n\n      _this.setState({\n        loadmore_test: 'Scroll down to load more'\n      });\n    };\n\n    _this.edit_it = function (id, type) {\n      _this.props.navigation.navigate('Edit_contact', {\n        contact_id: id\n      });\n    };\n\n    _this.state = {\n      contacts_data: [],\n      loadmore_test: '',\n      isRefreshing: false,\n      loadingmore: false,\n      history_array: [],\n      limit: 0\n    };\n    return _this;\n  }\n\n  _createClass(Contacts_tab_data, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.props.navigation.addListener('willFocus', function (route) {\n        _this2._onRefresh();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        }\n      }, this.state.loadingmore && React.createElement(ActivityIndicator, {\n        animating: this.state.loadingmore,\n        size: \"large\",\n        color: \"red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        }\n      }), React.createElement(FlatList, {\n        numColumns: 1,\n        data: this.state.contacts_data,\n        refreshControl: React.createElement(RefreshControl, {\n          refreshing: this.state.isRefreshing,\n          onRefresh: this._onRefresh.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          }\n        }),\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        onEndReachedThreshold: 3,\n        onEndReached: this.handleLoadMore.bind(this),\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item,\n              index = _ref.index;\n          return React.createElement(View, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99\n            }\n          }, React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              _this3.edit_it(item.contact_id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100\n            }\n          }, React.createElement(Contact_compo, {\n            note: item.note,\n            phone: item.phone,\n            email: item.email,\n            supplier_name: item.supplier_name,\n            contact_name: item.contact_name,\n            image: item.main_image.src,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101\n            }\n          })));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        }\n      }), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        }\n      }, this.state.loadmore_test)));\n    }\n  }]);\n\n  return Contacts_tab_data;\n}(Component);\n\nexport { Contacts_tab_data as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#fff'\n  },\n  heading: {\n    fontSize: 22,\n    color: \"#000000\",\n    marginTop: 10,\n    width: 100,\n    marginBottom: 20,\n    fontWeight: \"bold\"\n  }\n});","map":{"version":3,"sources":["D:/Notes_app/Pages/history_tabs/Contact_tab_data.js"],"names":["React","Component","SQLite","Contact_compo","Edit_contact","tabs_data_load","db","openDatabase","Contacts_tab_data","props","process_data","rows","setState","contacts_data","state","loadingmore","get_data","limit","tabname","then","response","data","JSON","parse","console","log","_onRefresh","isRefreshing","loadmore_test","handleLoadMore","parseInt","edit_it","id","type","navigation","navigate","contact_id","history_array","addListener","route","styles","container","bind","item","index","toString","note","phone","email","supplier_name","contact_name","main_image","src","StyleSheet","create","flex","justifyContent","alignItems","backgroundColor","heading","fontSize","color","marginTop","width","marginBottom","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { View, Text, StyleSheet, FlatList, RefreshControl, ActivityIndicator,TouchableOpacity } from 'react-native';\r\n\r\nimport { SQLite } from 'expo-sqlite';\r\nimport Contact_compo from '../History_components/Contact_compo';\r\nimport Edit_contact from '../edit_note/Edit_contact';\r\nimport { tabs_data_load } from '../models/all_models';\r\nconst db = SQLite.openDatabase('db.db');\r\n\r\nexport default class Contacts_tab_data extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            contacts_data: [],\r\n            loadmore_test: '',\r\n            isRefreshing: false,\r\n            loadingmore: false,\r\n            history_array: [],\r\n            limit: 0,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.get_data(this.state.limit);\r\n        this.props.navigation.addListener('willFocus', (route) => {\r\n            this._onRefresh();\r\n        });\r\n    }\r\n\r\n    process_data = (rows) => {\r\n\r\n        this.setState({\r\n            contacts_data: [...this.state.contacts_data, ...rows],\r\n            loadingmore: false\r\n        })\r\n    }\r\n\r\n    get_data = (limit,tabname='contacts') => {\r\n      \r\n        tabs_data_load(limit,tabname).then((response) => {  \r\n            var data   = JSON.parse(response);\r\n            console.log(data.data);\r\n            this.process_data(data.data)\r\n          \r\n        });   \r\n    }\r\n\r\n    _onRefresh = () => {\r\n        this.setState({ isRefreshing: true })\r\n        this.setState({ contacts_data: [] })\r\n        this.setState({ limit: 0 })\r\n        this.get_data(0);\r\n        this.setState({ isRefreshing: false })\r\n        this.setState({ loadmore_test: ' ', });\r\n    }\r\n\r\n    ///// LOAD MORE ////////////////////\r\n    handleLoadMore = () => {\r\n\r\n        this.setState({ loadmore_test: 'Loading...', });\r\n        var limit = parseInt(this.state.limit) + parseInt(20);  // increase page by 1\r\n        this.setState({ limit: limit });\r\n        this.get_data(limit);  // method for API call \r\n        this.setState({ loadmore_test: 'Scroll down to load more', });\r\n\r\n    };\r\n\r\n    //////////////EDIT PRODUCT OR CONTACT\r\n    edit_it = (id, type) => {\r\n        this.props.navigation.navigate('Edit_contact', {\r\n            contact_id: id\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n\r\n                {this.state.loadingmore &&\r\n                    <ActivityIndicator animating={this.state.loadingmore} size=\"large\" color=\"red\" />\r\n                }\r\n                <FlatList\r\n                    numColumns={1}\r\n                    data={this.state.contacts_data}\r\n                    refreshControl={\r\n                        <RefreshControl\r\n                            refreshing={this.state.isRefreshing}\r\n                            onRefresh={this._onRefresh.bind(this)}\r\n                        />\r\n                    }\r\n                    keyExtractor={(item, index) => index.toString()}\r\n                    onEndReachedThreshold={3}\r\n                    onEndReached={this.handleLoadMore.bind(this)}\r\n                    renderItem={({ item, index }) => (\r\n\r\n\r\n\r\n                        <View>\r\n                            <TouchableOpacity onPress={() => { this.edit_it(item.contact_id) }}>\r\n                                <Contact_compo note={item.note} phone={item.phone} email={item.email} supplier_name={item.supplier_name} contact_name={item.contact_name} image={item.main_image.src} />\r\n                            </TouchableOpacity>\r\n                        </View>\r\n\r\n                    )}\r\n                />\r\n\r\n                <View>\r\n                    <Text>{this.state.loadmore_test}</Text>\r\n                </View>\r\n\r\n\r\n            </View>\r\n\r\n        );\r\n    }\r\n\r\n}\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: '#fff',\r\n\r\n\r\n    },\r\n    heading: {\r\n        fontSize: 22,\r\n        color: \"#000000\",\r\n        marginTop: 10,\r\n        width: 100,\r\n        marginBottom: 20,\r\n        fontWeight: \"bold\"\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}