{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"D:\\\\Notes_app\\\\Pages\\\\History_online.js\";\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { TouchableOpacity } from 'react-native-gesture-handler';\nimport Event_compo from \"./History_components/Event_compo.js\";\nimport Contact_compo from \"./History_components/Contact_compo.js\";\nimport Product_compo from \"./History_components/Product_compo.js\";\nimport Supplier_compo from \"./History_components/Supplier_compo.js\";\nimport { api_name } from \"./Settings.js\";\n\nvar History_online = function (_Component) {\n  _inherits(History_online, _Component);\n\n  function History_online(props) {\n    var _this;\n\n    _classCallCheck(this, History_online);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(History_online).call(this, props));\n\n    _this._onRefresh = function () {\n      _this.setState({\n        isRefreshing: true\n      });\n\n      _this.setState({\n        history_array: []\n      });\n\n      _this.setState({\n        limit: 0\n      });\n\n      _this.__load_historydata(0);\n\n      _this.setState({\n        isRefreshing: false\n      });\n\n      _this.setState({\n        loadmore_test: ' '\n      });\n    };\n\n    _this.handleLoadMore = function () {\n      _this.setState({\n        loadmore_test: 'Loading...'\n      });\n\n      var limit = parseInt(_this.state.limit) + parseInt(20);\n\n      _this.setState({\n        limit: limit\n      });\n\n      _this.__load_historydata(limit);\n\n      _this.setState({\n        loadmore_test: 'Scroll down to load more'\n      });\n    };\n\n    _this.__load_historydata = function (limit) {\n      fetch(api_name + 'history/History_page/history_data', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          limit: limit\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this.setState({\n          history_array: [].concat(_toConsumableArray(_this.state.history_array), _toConsumableArray(responseJson)),\n          loadingmore: false\n        });\n      }).catch(function (error) {\n        console.error(error);\n      });\n    };\n\n    _this.edit_it = function (id, type) {\n      var name = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n      if (type == \"event\") {\n        _this.props.navigation.navigate('Add_suppliers', {\n          event_id: id,\n          event_name: name\n        });\n      }\n\n      if (type == \"supplier\") {\n        _this.props.navigation.navigate('Explore_data', {\n          supp_id: id,\n          supp_name: name\n        });\n      }\n\n      if (type == \"product\") {\n        _this.props.navigation.navigate('Edit_p', {\n          product_id: id\n        });\n      }\n\n      if (type == \"contact\") {\n        _this.props.navigation.navigate('Edit_c', {\n          contact_id: id\n        });\n      }\n    };\n\n    _this.state = {\n      loadmore_test: '',\n      isRefreshing: false,\n      loadingmore: true,\n      history_array: [],\n      limit: 0\n    };\n\n    _this.__load_historydata(_this.state.limit);\n\n    return _this;\n  }\n\n  _createClass(History_online, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.didFocusListener = this.props.navigation.addListener('didFocus', function () {\n        _this2.setState({\n          loadingmore: true\n        });\n\n        _this2.setState({\n          history_array: []\n        });\n\n        _this2.setState({\n          limit: 0\n        });\n\n        _this2.__load_historydata(0);\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.didFocusListener.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        }\n      }, React.createElement(Text, {\n        style: styles.heading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        }\n      }, \"HISTORY\")), this.state.loadingmore && React.createElement(ActivityIndicator, {\n        animating: this.state.loadingmore,\n        size: \"large\",\n        color: \"red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        }\n      }), React.createElement(FlatList, {\n        numColumns: 1,\n        data: this.state.history_array,\n        refreshControl: React.createElement(RefreshControl, {\n          refreshing: this.state.isRefreshing,\n          onRefresh: this._onRefresh.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          }\n        }),\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        onEndReachedThreshold: 3,\n        onEndReached: this.handleLoadMore.bind(this),\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item,\n              index = _ref.index;\n          return React.createElement(View, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175\n            }\n          }, item.data_type == 'event' && React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              _this3.edit_it(item.event.event_id, 'event', item.event.event_name);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 178\n            }\n          }, React.createElement(Event_compo, {\n            image: item.event_images,\n            event_name: item.event.event_name,\n            city: item.event.city,\n            from_date: item.event.from_date,\n            to_date: item.event.to_date,\n            data: item.event,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 181\n            }\n          })), item.data_type == 'supplier' && React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              _this3.edit_it(item.data.supplier_note_id, 'supplier', item.data.supplier_name);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187\n            }\n          }, React.createElement(Supplier_compo, {\n            image: item.supplier_images,\n            supplier_name: item.data.supplier_name,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190\n            }\n          })), item.data_type == 'contact' && React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              _this3.edit_it(item.data.contact_id, 'contact');\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 195\n            }\n          }, React.createElement(Contact_compo, {\n            contact_name: item.data.contact_name,\n            supplier_name: item.data.supplier_name,\n            phone: item.data.phone,\n            email: item.data.email,\n            note: item.data.note,\n            data: item.data,\n            image: item.contact_images,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 198\n            }\n          })), item.data_type == 'product' && React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              _this3.edit_it(item.data.product_id, 'product');\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 203\n            }\n          }, React.createElement(Product_compo, {\n            product_name: item.data.product_name,\n            supplier_name: item.data.supplier_name,\n            fob_price: item.data.fob_price,\n            moq: item.data.moq,\n            Note: item.data.Note,\n            image: item.pro_images,\n            data: item.data,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 206\n            }\n          })));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        }\n      }), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        }\n      }, this.state.loadmore_test)));\n    }\n  }]);\n\n  return History_online;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#fff'\n  },\n  heading: {\n    fontSize: 22,\n    color: \"#000000\",\n    marginTop: 10,\n    width: 100,\n    marginBottom: 20,\n    fontWeight: \"bold\"\n  }\n});\nexport default History_online;","map":{"version":3,"sources":["D:/Notes_app/Pages/History_online.js"],"names":["React","Component","TouchableOpacity","Event_compo","Contact_compo","Product_compo","Supplier_compo","api_name","History_online","props","_onRefresh","setState","isRefreshing","history_array","limit","__load_historydata","loadmore_test","handleLoadMore","parseInt","state","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","responseJson","loadingmore","catch","error","console","edit_it","id","type","name","navigation","navigate","event_id","event_name","supp_id","supp_name","product_id","contact_id","didFocusListener","addListener","remove","styles","container","heading","bind","item","index","toString","data_type","event","event_images","city","from_date","to_date","data","supplier_note_id","supplier_name","supplier_images","contact_name","phone","email","note","contact_images","product_name","fob_price","moq","Note","pro_images","StyleSheet","create","flex","justifyContent","alignItems","backgroundColor","fontSize","color","marginTop","width","marginBottom","fontWeight"],"mappings":"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","sourcesContent":["//import liraries\r\nimport React, { Component } from 'react';\r\nimport { View, Text, StyleSheet, FlatList, RefreshControl, ActivityIndicator } from 'react-native';\r\n \r\n \r\n// import Edit_product from './edit_note/Edit_product.js';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport Event_compo from './History_components/Event_compo.js';\r\nimport Contact_compo from './History_components/Contact_compo.js';\r\nimport Product_compo from './History_components/Product_compo.js';\r\nimport Supplier_compo from './History_components/Supplier_compo.js';\r\nimport { api_name } from './Settings.js';\r\n\r\n// create a component\r\nclass History_online extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            loadmore_test: '',\r\n            isRefreshing: false,\r\n            loadingmore: true,\r\n            history_array: [],\r\n            limit: 0,\r\n\r\n        }\r\n        this.__load_historydata(this.state.limit);\r\n\r\n    }\r\n\r\n\r\n    /////////////////////////////////////////////////////\r\n    ////////////// Reload Data when Change Tab //////////\r\n\r\n    componentDidMount() {\r\n        this.didFocusListener = this.props.navigation.addListener(\r\n            'didFocus',\r\n            () => {\r\n                this.setState({ loadingmore: true });\r\n                this.setState({ history_array: [] });\r\n                this.setState({ limit: 0 });\r\n                this.__load_historydata(0);\r\n\r\n            },\r\n        );\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.didFocusListener.remove();\r\n    }\r\n\r\n    /////////////////////////////////////////////////////\r\n    ////////////// Reload Data when Change Tab //////////\r\n\r\n\r\n\r\n    ////// ON REFERESH PAGE /////////\r\n    _onRefresh = () => {\r\n        this.setState({ isRefreshing: true })\r\n        this.setState({ history_array: [] })\r\n        this.setState({ limit: 0 })\r\n        this.__load_historydata(0);\r\n        this.setState({ isRefreshing: false })\r\n        this.setState({ loadmore_test: ' ', });\r\n    }\r\n\r\n\r\n    ///// LOAD MORE ////////////////////\r\n    handleLoadMore = () => {\r\n\r\n        this.setState({ loadmore_test: 'Loading...', });\r\n        var limit = parseInt(this.state.limit) + parseInt(20);  // increase page by 1\r\n        this.setState({ limit: limit });\r\n        this.__load_historydata(limit);  // method for API call \r\n        this.setState({ loadmore_test: 'Scroll down to load more', });\r\n\r\n    };\r\n\r\n\r\n    ////////////////////////////// LOAD MORE DATA ///////////////////////////////////\r\n    ///////////////////////////////////////////////////////////////////////////////// \r\n    __load_historydata = (limit) => {\r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++//// \r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++////\r\n\r\n        fetch(api_name + 'history/History_page/history_data', {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                limit: limit,\r\n            }),\r\n        }).then((response) => response.json())\r\n            .then((responseJson) => {\r\n\r\n                this.setState({\r\n                    history_array: [...this.state.history_array, ...responseJson],\r\n                    loadingmore: false\r\n                });\r\n\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n\r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++////\r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++////\r\n        // console.log(this.state.history_array);\r\n\r\n    }\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    ////////////////////////////////////////////////////////////////\r\n    edit_it = (id, type,name='') => {\r\n       \r\n        if (type == \"event\") {\r\n            this.props.navigation.navigate('Add_suppliers', {\r\n                event_id: id,\r\n                event_name: name\r\n            });\r\n        }\r\n\r\n        if (type == \"supplier\") {\r\n            this.props.navigation.navigate('Explore_data', {\r\n                supp_id: id,\r\n                supp_name: name\r\n            });\r\n        }\r\n\r\n\r\n        if (type == \"product\") {\r\n            this.props.navigation.navigate('Edit_p', {\r\n                product_id: id\r\n            });\r\n        }\r\n        if (type == \"contact\") {\r\n            this.props.navigation.navigate('Edit_c', {\r\n                contact_id: id\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n                <View>\r\n                    <Text style={styles.heading}>HISTORY</Text>\r\n                </View>\r\n                {this.state.loadingmore &&\r\n                    <ActivityIndicator animating={this.state.loadingmore} size=\"large\" color=\"red\" />\r\n                }\r\n                <FlatList\r\n                    numColumns={1}\r\n                    data={this.state.history_array}\r\n                    refreshControl={\r\n                        <RefreshControl\r\n                            refreshing={this.state.isRefreshing}\r\n                            onRefresh={this._onRefresh.bind(this)}\r\n                        />\r\n                    }\r\n                    keyExtractor={(item, index) => index.toString()}\r\n                    onEndReachedThreshold={3}\r\n                    onEndReached={this.handleLoadMore.bind(this)}\r\n                    renderItem={({ item, index }) => (\r\n\r\n\r\n\r\n                        <View>\r\n\r\n                            {item.data_type == 'event' &&\r\n                                <TouchableOpacity onPress={() => {\r\n                                    this.edit_it(item.event.event_id,'event',item.event.event_name);\r\n                                }}>\r\n                                     <Event_compo image={item.event_images} event_name={item.event.event_name} city={item.event.city} from_date={item.event.from_date} to_date={item.event.to_date} data={item.event} />\r\n                                </TouchableOpacity>\r\n                            }\r\n\r\n\r\n                            {item.data_type == 'supplier' &&\r\n                                <TouchableOpacity onPress={() => {\r\n                                        this.edit_it(item.data.supplier_note_id, 'supplier',item.data.supplier_name);\r\n                                    }}>\r\n                                <Supplier_compo image={item.supplier_images} supplier_name={item.data.supplier_name} />\r\n                                </TouchableOpacity>\r\n                            }\r\n\r\n                            {item.data_type == 'contact' &&\r\n                                <TouchableOpacity onPress={() => {\r\n                                    this.edit_it(item.data.contact_id, 'contact');\r\n                                }}>\r\n                                    <Contact_compo contact_name={item.data.contact_name} supplier_name={item.data.supplier_name} phone={item.data.phone} email={item.data.email} note={item.data.note} data={item.data} image={item.contact_images} />\r\n                                </TouchableOpacity>\r\n                            }\r\n\r\n                            {item.data_type == 'product' &&\r\n                                <TouchableOpacity onPress={() => {\r\n                                    this.edit_it(item.data.product_id, 'product');\r\n                                }}>\r\n                                    <Product_compo product_name={item.data.product_name} supplier_name={item.data.supplier_name} fob_price={item.data.fob_price} moq={item.data.moq} Note={item.data.Note} image={item.pro_images} data={item.data} />\r\n                                </TouchableOpacity>\r\n                            }\r\n\r\n                        </View>\r\n\r\n                    )}\r\n                />\r\n\r\n                <View>\r\n                    <Text>{this.state.loadmore_test}</Text>\r\n                </View>\r\n\r\n\r\n            </View>\r\n\r\n        );\r\n    }\r\n}\r\n\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: '#fff',\r\n\r\n\r\n    },\r\n    heading: {\r\n        fontSize: 22,\r\n        color: \"#000000\",\r\n        marginTop: 10,\r\n        width: 100,\r\n        marginBottom: 20,\r\n        fontWeight: \"bold\"\r\n    }\r\n});\r\n\r\n//make this component available to the app\r\nexport default History_online; \r\n"]},"metadata":{},"sourceType":"module"}