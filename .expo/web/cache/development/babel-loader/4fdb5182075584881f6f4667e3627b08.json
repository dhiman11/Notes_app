{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"D:\\\\Notes_app\\\\Pages\\\\product_tabs\\\\Product_online.js\";\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport NetInfo from \"react-native-web/dist/exports/NetInfo\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Product_list from \"../Products/Product_list\";\nimport { TextInput, TouchableOpacity } from 'react-native-gesture-handler';\nimport Product_detail_modal from \"../modals/Product_detail_modal\";\nimport { api_name } from \"../Settings\";\n\nvar _Dimensions$get = Dimensions.get('window'),\n    width = _Dimensions$get.width;\n\nvar itemWidth = width / 180;\n\nvar Product_online = function (_Component) {\n  _inherits(Product_online, _Component);\n\n  function Product_online(props) {\n    var _this;\n\n    _classCallCheck(this, Product_online);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Product_online).call(this, props));\n\n    _this.loadProducts = function (limit, categories, min_usd, max_usd, min_date, max_date, search_input, search_type, event_name, search_by_user) {\n      fetch(api_name + 'products/ProductsList/all_products', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          limit: limit,\n          categories: categories,\n          min_usd: min_usd,\n          max_usd: max_usd,\n          min_date: min_date,\n          max_date: max_date,\n          search_input: search_input,\n          search_type: search_type,\n          event_name: event_name,\n          search_by_user: search_by_user\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        _this.setState({\n          products_data: [].concat(_toConsumableArray(_this.state.products_data), _toConsumableArray(responseJson)),\n          loadmore_btn_text: \"Load\",\n          isLoading: false\n        });\n      }).catch(function (error) {});\n    };\n\n    _this.renderFooter = function (btn_text) {\n      return React.createElement(View, {\n        style: {\n          paddingVertical: 20,\n          borderTopWidth: 1,\n          borderColor: \"#CED0CE\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          _this.loadmore_products();\n        },\n        style: styles.loadmore,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: \"#fff\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        }\n      }, btn_text))));\n    };\n\n    _this.loadmore_products = function () {\n      var loadmore_val = parseInt(_this.state.loadmore) + parseInt(10);\n\n      _this.setState({\n        loadmore: loadmore_val,\n        loadmore_btn_text: \"Loading...\"\n      });\n\n      _this.loadProducts(loadmore_val, '', _this.state.min_usd, _this.state.max_price, '', '', _this.state.search_input, 'all', 'this_admin', 'all');\n    };\n\n    _this.search_products = function () {\n      var resetload_more = 0;\n\n      _this.setState({\n        loadmore: resetload_more,\n        products_data: [],\n        isLoading: true\n      });\n\n      _this.loadProducts(resetload_more, '', _this.state.min_usd, _this.state.max_price, '', '', _this.state.search_input, 'all', 'this_admin', 'all');\n    };\n\n    _this.show_product = function (product_id) {\n      _this.setState({\n        prudut_detail_data: [],\n        prudut_main_photo: [],\n        product_all_images: [],\n        prudut_detail_popup: true\n      });\n\n      fetch(api_name + 'edit/edit/product/' + product_id, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          product_id: product_id\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (responseJson) {\n        if (responseJson.result) {\n          _this.setState({\n            prudut_detail_data: responseJson.product,\n            prudut_main_photo: responseJson.product.main_image,\n            product_all_images: responseJson.product.all_images\n          });\n        }\n      }).catch(function (error) {\n        console.error(error);\n      });\n    };\n\n    _this.show_hide_detail_modal = function (visible) {\n      _this.setState({\n        prudut_detail_popup: visible\n      });\n    };\n\n    _this.state = {\n      isLoading: true,\n      isOnline: true,\n      products_data: [],\n      loadmore: 0,\n      loadmore_btn_text: 'Load More',\n      search_input: '',\n      min_usd: 0,\n      max_usd: null,\n      prudut_detail_popup: false,\n      prudut_detail_data: [],\n      prudut_main_photo: [],\n      product_all_images: []\n    };\n\n    _this.loadProducts(_this.state.loadmore, '', _this.state.min_usd, _this.state.max_price, '', '', _this.state.search_input, 'all', 'this_admin', 'all');\n\n    return _this;\n  }\n\n  _createClass(Product_online, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.didFocusListener = this.props.navigation.addListener('didFocus', function () {\n        _this2.setState({\n          isLoading: true\n        });\n\n        _this2.setState({\n          products_data: []\n        });\n\n        _this2.setState({\n          loadmore: 0\n        });\n\n        _this2.loadProducts(_this2.state.loadmore, '', _this2.state.min_usd, _this2.state.max_price, '', '', _this2.state.search_input, 'all', 'this_admin', 'all');\n\n        NetInfo.isConnected.fetch().then(function (res) {\n          _this2.setState({\n            isOnline: res\n          });\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.didFocusListener.remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        }\n      }, this.state.isOnline ? React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        }\n      }, this.state.prudut_detail_popup ? React.createElement(Product_detail_modal, {\n        all_images: this.state.product_all_images,\n        product_main_pic: this.state.prudut_main_photo,\n        product_data: this.state.prudut_detail_data,\n        modalvisibility: this.state.prudut_detail_popup,\n        updateState: this.show_hide_detail_modal.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        }\n      }) : null, React.createElement(View, {\n        style: {\n          flexDirection: \"row\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        }\n      }, React.createElement(TextInput, {\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            search_input: text\n          });\n        },\n        onSubmitEditing: function onSubmitEditing() {\n          return _this3.search_products();\n        },\n        style: {\n          borderColor: \"red\",\n          borderWidth: 1,\n          marginLeft: 10,\n          marginTop: 10,\n          width: 300,\n          paddingLeft: 10\n        },\n        placeholder: \"Search here\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        }\n      }), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          _this3.search_products();\n        },\n        style: {\n          backgroundColor: \"red\",\n          paddingLeft: 23,\n          paddingBottom: 13,\n          paddingTop: 13,\n          paddingRight: 23,\n          marginTop: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        }\n      }, React.createElement(Image, {\n        style: {\n          width: 25,\n          height: 25\n        },\n        source: require(\"../../assets/img/search.png\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        }\n      }))), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        }\n      }, React.createElement(View, {\n        style: {\n          flexDirection: \"row\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257\n        }\n      }, React.createElement(TextInput, {\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            min_usd: text\n          });\n        },\n        style: {\n          borderColor: \"red\",\n          borderWidth: 1,\n          marginTop: 5,\n          marginLeft: 10,\n          width: 100,\n          height: 40,\n          paddingLeft: 10\n        },\n        placeholder: \"min price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        }\n      }), React.createElement(TextInput, {\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            max_usd: text\n          });\n        },\n        style: {\n          borderColor: \"red\",\n          borderWidth: 1,\n          marginTop: 5,\n          marginLeft: 10,\n          width: 100,\n          height: 40,\n          paddingLeft: 10\n        },\n        placeholder: \"max price\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263\n        }\n      }))), React.createElement(View, {\n        style: {\n          marginLeft: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272\n        }\n      }, \"Looking for: \", this.state.search_input, \" .\")), this.state.isLoading && React.createElement(ActivityIndicator, {\n        animating: this.state.isLoading,\n        size: \"large\",\n        color: \"red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        }\n      }), React.createElement(FlatList, {\n        style: styles.container,\n        numColumns: parseInt(itemWidth),\n        data: this.state.products_data,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return React.createElement(Product_list, {\n            updateState: _this3.show_product.bind(_this3),\n            style: styles.rowcolumn,\n            data: item,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 287\n            }\n          });\n        },\n        ListFooterComponent: this.renderFooter(this.state.loadmore_btn_text),\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        }\n      })) : React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        }\n      }, \"You are offline\")));\n    }\n  }]);\n\n  return Product_online;\n}(Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    padding: 10,\n    marginBottom: 60\n  },\n  rowcolumn: {\n    flexDirection: \"row\",\n    flex: 1\n  },\n  loadmore: {\n    width: 100,\n    backgroundColor: \"red\",\n    marginBottom: 200,\n    color: \"#fff\",\n    marginLeft: 10,\n    padding: 10\n  }\n});\nexport default Product_online;","map":{"version":3,"sources":["D:/Notes_app/Pages/product_tabs/Product_online.js"],"names":["React","Component","Product_list","TextInput","TouchableOpacity","Product_detail_modal","api_name","Dimensions","get","width","itemWidth","Product_online","props","loadProducts","limit","categories","min_usd","max_usd","min_date","max_date","search_input","search_type","event_name","search_by_user","fetch","method","headers","Accept","body","JSON","stringify","then","response","json","responseJson","setState","products_data","state","loadmore_btn_text","isLoading","catch","error","renderFooter","btn_text","paddingVertical","borderTopWidth","borderColor","loadmore_products","styles","loadmore","color","loadmore_val","parseInt","max_price","search_products","resetload_more","show_product","product_id","prudut_detail_data","prudut_main_photo","product_all_images","prudut_detail_popup","result","product","main_image","all_images","console","show_hide_detail_modal","visible","isOnline","didFocusListener","navigation","addListener","NetInfo","isConnected","res","remove","bind","flexDirection","text","borderWidth","marginLeft","marginTop","paddingLeft","backgroundColor","paddingBottom","paddingTop","paddingRight","height","require","container","item","rowcolumn","index","toString","StyleSheet","create","padding","marginBottom","flex"],"mappings":"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","sourcesContent":["//import liraries\r\nimport React, { Component } from 'react';\r\nimport { View, Image, Text, ActivityIndicator, StyleSheet, FlatList, NetInfo,Dimensions  } from 'react-native';\r\nimport Product_list from '../Products/Product_list';\r\nimport { TextInput, TouchableOpacity } from 'react-native-gesture-handler';\r\nimport Product_detail_modal from '../modals/Product_detail_modal';\r\nimport { api_name } from '../Settings';\r\n \r\nconst {width} = Dimensions.get('window');\r\nconst itemWidth = (width) / 180;\r\n\r\n// create a component\r\nclass Product_online extends Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoading: true,\r\n            isOnline: true,\r\n            products_data: [],\r\n            loadmore: 0,\r\n            loadmore_btn_text: 'Load More',\r\n            search_input: '',\r\n            min_usd: 0,\r\n            max_usd: null,\r\n            prudut_detail_popup: false,\r\n            prudut_detail_data: [],\r\n            prudut_main_photo: [],\r\n            product_all_images: []\r\n        }\r\n        this.loadProducts(this.state.loadmore, '', this.state.min_usd, this.state.max_price, '', '', this.state.search_input, 'all', 'this_admin', 'all');\r\n    }\r\n\r\n\r\n    /////////////////////////////////////////////////////\r\n    ////////////// Reload Data when Change Tab //////////\r\n\r\n    componentDidMount() {\r\n        this.didFocusListener = this.props.navigation.addListener(\r\n            'didFocus',\r\n            () => {\r\n                this.setState({ isLoading: true });\r\n                this.setState({ products_data: [] });\r\n                this.setState({ loadmore: 0 });\r\n                this.loadProducts(this.state.loadmore, '', this.state.min_usd, this.state.max_price, '', '', this.state.search_input, 'all', 'this_admin', 'all');\r\n\r\n                NetInfo.isConnected.fetch().then(res => {\r\n                    this.setState({\r\n                        isOnline: res\r\n                    });\r\n                })\r\n            },\r\n        );\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.didFocusListener.remove();\r\n    }\r\n\r\n    /////////////////////////////////////////////////////\r\n    ////////////// Reload Data when Change Tab //////////\r\n\r\n\r\n\r\n\r\n    /////////Load Product Request/////////\r\n    ///////////////////////////////////\r\n    loadProducts = (limit, categories, min_usd, max_usd, min_date, max_date, search_input, search_type, event_name, search_by_user) => {\r\n\r\n        fetch(api_name+'products/ProductsList/all_products', {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                limit: limit,\r\n                categories: categories,\r\n                min_usd: min_usd,\r\n                max_usd: max_usd,\r\n                min_date: min_date,\r\n                max_date: max_date,\r\n                search_input: search_input,\r\n                search_type: search_type,\r\n                event_name: event_name,\r\n                search_by_user: search_by_user\r\n            }),\r\n        }).then((response) => response.json())\r\n            .then((responseJson) => {\r\n\r\n                this.setState({\r\n                    products_data: [...this.state.products_data, ...responseJson],\r\n                    loadmore_btn_text: \"Load\",\r\n                    isLoading: false\r\n                }) //another array\r\n\r\n            })\r\n            .catch((error) => {\r\n                // console.error(error);\r\n            });\r\n    }\r\n\r\n    ////////////Footer Load more///////////////\r\n    /////////////////////////////////////////\r\n    renderFooter = (btn_text) => {\r\n        return (\r\n            <View\r\n                style={{\r\n                    paddingVertical: 20,\r\n                    borderTopWidth: 1,\r\n                    borderColor: \"#CED0CE\"\r\n                }}\r\n            >\r\n                <View>\r\n                    <TouchableOpacity onPress={() => { this.loadmore_products() }} style={styles.loadmore}>\r\n                        <Text style={{ color: \"#fff\" }}>{btn_text}</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n\r\n            </View>\r\n\r\n\r\n\r\n\r\n\r\n        );\r\n    };\r\n\r\n    //////////Load More detail////////////\r\n    ///////////////////////////////////\r\n\r\n    loadmore_products = () => {\r\n        var loadmore_val = parseInt(this.state.loadmore) + parseInt(10);\r\n        this.setState({\r\n            loadmore: loadmore_val,\r\n            loadmore_btn_text: \"Loading...\"\r\n        });\r\n\r\n\r\n        this.loadProducts(loadmore_val, '', this.state.min_usd, this.state.max_price, '', '', this.state.search_input, 'all', 'this_admin', 'all');\r\n\r\n    }\r\n\r\n    search_products = () => {\r\n        /////////////RESET PRODUCT SCREEN///////////\r\n        var resetload_more = 0;\r\n\r\n        this.setState({\r\n            loadmore: resetload_more,\r\n            products_data: [],\r\n            isLoading: true,\r\n        })\r\n\r\n\r\n        ///////////////////////////////\r\n        //////++++++++++++++++++++++++\r\n        ///// LOAD NEW DATA ++++++++++\r\n\r\n        this.loadProducts(resetload_more, '', this.state.min_usd, this.state.max_price, '', '', this.state.search_input, 'all', 'this_admin', 'all');\r\n\r\n        /////////////////////////////\r\n\r\n    }\r\n\r\n\r\n    //////////// Show product Edit ///////////////////\r\n    //////////////////////////////////////////////////\r\n    show_product = (product_id) => {\r\n\r\n        this.setState({\r\n            prudut_detail_data: [],\r\n            prudut_main_photo: [],\r\n            product_all_images: [],\r\n            prudut_detail_popup: true\r\n        })\r\n\r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++//// \r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++////\r\n\r\n        fetch(api_name+'edit/edit/product/' + product_id, {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                product_id: product_id,\r\n            }),\r\n        }).then((response) => response.json())\r\n            .then((responseJson) => {\r\n\r\n                if (responseJson.result) {\r\n\r\n                    this.setState({\r\n                        prudut_detail_data: responseJson.product,\r\n                        prudut_main_photo: responseJson.product.main_image,\r\n                        product_all_images: responseJson.product.all_images,\r\n                    })\r\n                }\r\n\r\n            })\r\n            .catch((error) => {\r\n                console.error(error);\r\n            });\r\n\r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++////\r\n        ///++++++++++++++++++++++++++++++++++++++++++++++++++++++++++////\r\n\r\n    }\r\n    //////////////////////////////////////////////////\r\n    //////////////////////////////////////////////////\r\n\r\n\r\n    //////////// Show Hide popup ///////////////////\r\n    //////////////////////////////////////////////////\r\n    show_hide_detail_modal = (visible) => {\r\n\r\n        this.setState({\r\n            prudut_detail_popup: visible\r\n        });\r\n\r\n\r\n\r\n    }\r\n    //////////////////////////////////////////////////\r\n    //////////////////////////////////////////////////\r\n\r\n    render() {\r\n        return (\r\n            <View>\r\n            {this.state.isOnline ? \r\n                    <View>  \r\n                        {this.state.prudut_detail_popup ? <Product_detail_modal all_images={this.state.product_all_images} product_main_pic={this.state.prudut_main_photo} product_data={this.state.prudut_detail_data} modalvisibility={this.state.prudut_detail_popup} updateState={this.show_hide_detail_modal.bind(this)} /> : null}\r\n\r\n                        <View style={{ flexDirection: \"row\" }}>\r\n                            <TextInput\r\n                                onChangeText={(text) => this.setState({ search_input: text })}\r\n                                onSubmitEditing={() => this.search_products()}\r\n                                style={{ borderColor: \"red\", borderWidth: 1, marginLeft: 10, marginTop: 10, width: 300,paddingLeft:10 }}\r\n                                placeholder=\"Search here\"\r\n                            />\r\n                            <TouchableOpacity onPress={() => {\r\n\r\n                                this.search_products();\r\n\r\n                            }} style={{ backgroundColor: \"red\", paddingLeft: 23, paddingBottom: 13, paddingTop: 13, paddingRight: 23, marginTop: 10 }}>\r\n                                <Image\r\n                                    style={{ width: 25, height: 25 }}\r\n                                    source={require('../../assets/img/search.png')}\r\n                                />\r\n                            </TouchableOpacity>\r\n                        </View>\r\n\r\n                        <View>\r\n                            <View style={{ flexDirection: \"row\" }}>\r\n                                <TextInput\r\n                                    onChangeText={(text) => this.setState({ min_usd: text })}\r\n                                    style={{ borderColor: \"red\", borderWidth: 1, marginTop: 5, marginLeft: 10, width: 100, height: 40,paddingLeft:10 }}\r\n                                    placeholder=\"min price\"\r\n                                />\r\n                                <TextInput\r\n                                    onChangeText={(text) => this.setState({ max_usd: text })}\r\n                                    style={{ borderColor: \"red\", borderWidth: 1, marginTop: 5, marginLeft: 10, width: 100, height: 40,paddingLeft:10 }}\r\n                                    placeholder=\"max price\"\r\n                                />\r\n                            </View>\r\n                        </View>\r\n\r\n                        <View style={{ marginLeft: 10 }}>\r\n                            <Text>Looking for: {this.state.search_input} .</Text>\r\n                        </View>\r\n\r\n                        {this.state.isLoading &&\r\n                            <ActivityIndicator animating={this.state.isLoading} size=\"large\" color=\"red\" />\r\n                        }\r\n                      \r\n                        <FlatList\r\n                            style={styles.container}\r\n                            numColumns={parseInt(itemWidth)}\r\n                            data={this.state.products_data}\r\n                            //Item Separator View\r\n                            renderItem={({ item }) => (\r\n\r\n\r\n                                <Product_list updateState={this.show_product.bind(this)} style={styles.rowcolumn} data={item} />\r\n\r\n                            )}\r\n\r\n                            ListFooterComponent={this.renderFooter(this.state.loadmore_btn_text)}\r\n                            keyExtractor={(item, index) => index.toString()}\r\n\r\n                        />\r\n\r\n\r\n\r\n\r\n\r\n\r\n                    </View>:\r\n                    <View>\r\n                        <Text>You are offline</Text>\r\n                        </View>\r\n                    }\r\n\r\n            </View>\r\n\r\n\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        padding: 10,\r\n        marginBottom: 60,\r\n    },\r\n    rowcolumn: {\r\n        flexDirection: \"row\",\r\n        flex: 1,\r\n    },\r\n    loadmore: {\r\n        width: 100,\r\n        backgroundColor: \"red\",\r\n        marginBottom: 200,\r\n        color: \"#fff\",\r\n        marginLeft: 10,\r\n        padding: 10\r\n    }\r\n\r\n});\r\n\r\n//make this component available to the app\r\nexport default Product_online;\r\n"]},"metadata":{},"sourceType":"module"}