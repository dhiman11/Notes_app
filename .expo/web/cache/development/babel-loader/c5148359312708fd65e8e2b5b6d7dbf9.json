{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nvar _jsxFileName = \"D:\\\\Notes_app\\\\Pages\\\\history_tabs\\\\Suppliers_tab.js\";\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport { SQLite } from 'expo-sqlite';\nvar db = SQLite.openDatabase('db.db');\nimport Supplier_compo from \"../History_components/Supplier_compo\";\nimport { tabs_data_load } from \"../models/all_models\";\n\nvar Suppliers_tab = function (_Component) {\n  _inherits(Suppliers_tab, _Component);\n\n  function Suppliers_tab(props) {\n    var _this;\n\n    _classCallCheck(this, Suppliers_tab);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Suppliers_tab).call(this, props));\n\n    _this.process_data = function (rows) {\n      _this.setState({\n        suppliers_data: [].concat(_toConsumableArray(_this.state.suppliers_data), _toConsumableArray(rows)),\n        loadingmore: false\n      });\n    };\n\n    _this.get_data = function (limit) {\n      var tabname = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'supplier';\n      tabs_data_load(limit, tabname).then(function (response) {\n        var data = JSON.parse(response);\n        console.log(data.data);\n\n        _this.process_data(data.data);\n      });\n    };\n\n    _this._onRefresh = function () {\n      _this.setState({\n        isRefreshing: true\n      });\n\n      _this.setState({\n        suppliers_data: []\n      });\n\n      _this.setState({\n        limit: 0\n      });\n\n      _this.get_data(0);\n\n      _this.setState({\n        isRefreshing: false\n      });\n\n      _this.setState({\n        loadmore_test: ' '\n      });\n    };\n\n    _this.handleLoadMore = function () {\n      _this.setState({\n        loadmore_test: 'Loading...'\n      });\n\n      var limit = parseInt(_this.state.limit) + parseInt(20);\n\n      _this.setState({\n        limit: limit\n      });\n\n      _this.get_data(limit);\n\n      _this.setState({\n        loadmore_test: 'Scroll down to load more'\n      });\n    };\n\n    _this.state = {\n      suppliers_data: [],\n      loadmore_test: '',\n      isRefreshing: false,\n      loadingmore: false,\n      history_array: [],\n      limit: 0\n    };\n    return _this;\n  }\n\n  _createClass(Suppliers_tab, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.props.navigation.addListener('willFocus', function (route) {\n        _this2._onRefresh();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        }\n      }, this.state.loadingmore && React.createElement(ActivityIndicator, {\n        animating: this.state.loadingmore,\n        size: \"large\",\n        color: \"red\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        }\n      }), React.createElement(FlatList, {\n        numColumns: 1,\n        data: this.state.suppliers_data,\n        refreshControl: React.createElement(RefreshControl, {\n          refreshing: this.state.isRefreshing,\n          onRefresh: this._onRefresh.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          }\n        }),\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        onEndReachedThreshold: 3,\n        onEndReached: this.handleLoadMore.bind(this),\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item,\n              index = _ref.index;\n          return React.createElement(View, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 93\n            }\n          }, React.createElement(Supplier_compo, {\n            event_name: item.event_name,\n            supplier_name: item.supplier_name,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 95\n            }\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        }\n      }), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        }\n      }, this.state.loadmore_test)));\n    }\n  }]);\n\n  return Suppliers_tab;\n}(Component);\n\nexport { Suppliers_tab as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#fff'\n  },\n  heading: {\n    fontSize: 22,\n    color: \"#000000\",\n    marginTop: 10,\n    width: 100,\n    marginBottom: 20,\n    fontWeight: \"bold\"\n  }\n});","map":{"version":3,"sources":["D:/Notes_app/Pages/history_tabs/Suppliers_tab.js"],"names":["React","Component","SQLite","db","openDatabase","Supplier_compo","tabs_data_load","Suppliers_tab","props","process_data","rows","setState","suppliers_data","state","loadingmore","get_data","limit","tabname","then","response","data","JSON","parse","console","log","_onRefresh","isRefreshing","loadmore_test","handleLoadMore","parseInt","history_array","navigation","addListener","route","styles","container","bind","item","index","toString","event_name","supplier_name","StyleSheet","create","flex","justifyContent","alignItems","backgroundColor","heading","fontSize","color","marginTop","width","marginBottom","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { View, Text, StyleSheet,FlatList,RefreshControl,ActivityIndicator } from 'react-native';\r\n\r\nimport { SQLite } from 'expo-sqlite'; \r\nconst db = SQLite.openDatabase('db.db'); \r\nimport Supplier_compo from '../History_components/Supplier_compo'; \r\nimport { tabs_data_load } from '../models/all_models';\r\n \r\n\r\nexport default class Suppliers_tab extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            suppliers_data: [],\r\n            loadmore_test:'',\r\n            isRefreshing:false,\r\n            loadingmore:false, \r\n            history_array:[],\r\n            limit:0,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // this.get_data(this.state.limit);\r\n        this.props.navigation.addListener('willFocus', (route) => {\r\n          this._onRefresh();\r\n          });\r\n    }\r\n\r\n    process_data=(rows)=>{\r\n       \r\n        this.setState({  \r\n            suppliers_data:[...this.state.suppliers_data,...rows],\r\n            loadingmore:false\r\n        })\r\n    }\r\n\r\n    get_data = (limit,tabname='supplier') => {\r\n      \r\n        tabs_data_load(limit,tabname).then((response) => {  \r\n            var data   = JSON.parse(response);\r\n            console.log(data.data);\r\n            this.process_data(data.data)\r\n          \r\n        });   \r\n    }\r\n\r\n\r\n    _onRefresh=()=>{\r\n        this.setState({isRefreshing:true})\r\n        this.setState({suppliers_data:[]})\r\n        this.setState({limit:0})\r\n        this.get_data(0); \r\n        this.setState({isRefreshing:false})\r\n        this.setState({ loadmore_test:' ',}) ;\r\n    }\r\n\r\n        ///// LOAD MORE ////////////////////\r\n        handleLoadMore = () => {\r\n        \r\n            this.setState({ loadmore_test:'Loading...',}) ;\r\n            var limit = parseInt(this.state.limit) + parseInt(20);  // increase page by 1\r\n            this.setState({limit:limit});\r\n            this.get_data(limit);  // method for API call \r\n            this.setState({ loadmore_test:'Scroll down to load more',}) ;\r\n         \r\n        };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <View style={styles.container}>\r\n                \r\n                {this.state.loadingmore &&\r\n                    <ActivityIndicator animating={this.state.loadingmore} size=\"large\" color=\"red\" />\r\n                }\r\n                <FlatList\r\n                    numColumns={1}\r\n                    data={this.state.suppliers_data}\r\n                    refreshControl={\r\n                        <RefreshControl\r\n                            refreshing={this.state.isRefreshing}\r\n                            onRefresh={this._onRefresh.bind(this)}\r\n                        />\r\n                    }\r\n                    keyExtractor={(item, index) => index.toString()}\r\n                    onEndReachedThreshold={3}\r\n                    onEndReached={this.handleLoadMore.bind(this)}\r\n                    renderItem={({ item, index }) => (\r\n\r\n\r\n\r\n                        <View>\r\n                                {/* {console.log(item.supplier_name)} */}\r\n                                  <Supplier_compo event_name={item.event_name} supplier_name = {item.supplier_name} /> \r\n                         \r\n                        </View>\r\n\r\n                    )}\r\n                />\r\n\r\n                <View>\r\n                    <Text>{this.state.loadmore_test}</Text>\r\n                </View>\r\n\r\n\r\n            </View>\r\n\r\n        );\r\n    }\r\n\r\n}\r\n// define your styles\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: '#fff',\r\n        \r\n        \r\n    },\r\n    heading:{\r\n        fontSize:22,\r\n        color:\"#000000\",\r\n        marginTop: 10, \r\n        width:100,\r\n        marginBottom: 20,\r\n        fontWeight:\"bold\"\r\n    }\r\n});"]},"metadata":{},"sourceType":"module"}